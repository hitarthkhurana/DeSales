"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@here-wallet";
exports.ids = ["vendor-chunks/@here-wallet"];
exports.modules = {

/***/ "(ssr)/./node_modules/@here-wallet/core/build/HereKeyStore.js":
/*!**************************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/HereKeyStore.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.HereKeyStore = void 0;\nconst key_pair_1 = __webpack_require__(/*! near-api-js/lib/utils/key_pair */ \"(ssr)/./node_modules/near-api-js/lib/utils/key_pair.js\");\nconst JSONStorage_1 = __webpack_require__(/*! ./JSONStorage */ \"(ssr)/./node_modules/@here-wallet/core/build/JSONStorage.js\");\nclass HereKeyStore {\n    constructor(storage = new JSONStorage_1.StateStorage()) {\n        this.storage = storage;\n    }\n    setActiveAccount(network, id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const state = yield this.storage.getState(network);\n            state.activeAccount = id;\n            this.storage.setState(network, state);\n        });\n    }\n    setKey(networkId, accountId, keyPair) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const state = yield this.storage.getState(networkId);\n            state.accounts[accountId] = keyPair.toString();\n            this.storage.setState(networkId, state);\n        });\n    }\n    getAccounts(network) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const state = yield this.storage.getState(network);\n            return Object.keys(state.accounts);\n        });\n    }\n    getActiveAccount(network) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const state = yield this.storage.getState(network);\n            return state.activeAccount;\n        });\n    }\n    getKey(networkId, accountId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const state = yield this.storage.getState(networkId);\n            const privateKey = state.accounts[accountId];\n            if (privateKey == null)\n                throw Error(`For ${accountId} in ${networkId} network key not found`);\n            const keyPair = key_pair_1.KeyPair.fromString(privateKey);\n            return keyPair;\n        });\n    }\n    removeKey(networkId, accountId) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let state = yield this.storage.getState(networkId);\n            if (state.activeAccount === accountId) {\n                state.activeAccount = null;\n            }\n            delete state.accounts[accountId];\n            this.storage.setState(networkId, state);\n        });\n    }\n    getNetworks() {\n        return __awaiter(this, void 0, void 0, function* () {\n            let state = yield this.storage.getFullState();\n            return Object.keys(state.accounts);\n        });\n    }\n    clear() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.storage.clear();\n        });\n    }\n}\nexports.HereKeyStore = HereKeyStore;\n//# sourceMappingURL=HereKeyStore.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvSGVyZUtleVN0b3JlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxvQkFBb0I7QUFDcEIsbUJBQW1CLG1CQUFPLENBQUMsOEZBQWdDO0FBQzNELHNCQUFzQixtQkFBTyxDQUFDLGtGQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxXQUFXLEtBQUssV0FBVztBQUM5RDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWxsby1uZWFyLy4vbm9kZV9tb2R1bGVzL0BoZXJlLXdhbGxldC9jb3JlL2J1aWxkL0hlcmVLZXlTdG9yZS5qcz84NzZjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkhlcmVLZXlTdG9yZSA9IHZvaWQgMDtcbmNvbnN0IGtleV9wYWlyXzEgPSByZXF1aXJlKFwibmVhci1hcGktanMvbGliL3V0aWxzL2tleV9wYWlyXCIpO1xuY29uc3QgSlNPTlN0b3JhZ2VfMSA9IHJlcXVpcmUoXCIuL0pTT05TdG9yYWdlXCIpO1xuY2xhc3MgSGVyZUtleVN0b3JlIHtcbiAgICBjb25zdHJ1Y3RvcihzdG9yYWdlID0gbmV3IEpTT05TdG9yYWdlXzEuU3RhdGVTdG9yYWdlKCkpIHtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gc3RvcmFnZTtcbiAgICB9XG4gICAgc2V0QWN0aXZlQWNjb3VudChuZXR3b3JrLCBpZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB5aWVsZCB0aGlzLnN0b3JhZ2UuZ2V0U3RhdGUobmV0d29yayk7XG4gICAgICAgICAgICBzdGF0ZS5hY3RpdmVBY2NvdW50ID0gaWQ7XG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0U3RhdGUobmV0d29yaywgc3RhdGUpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0S2V5KG5ldHdvcmtJZCwgYWNjb3VudElkLCBrZXlQYWlyKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0ZSA9IHlpZWxkIHRoaXMuc3RvcmFnZS5nZXRTdGF0ZShuZXR3b3JrSWQpO1xuICAgICAgICAgICAgc3RhdGUuYWNjb3VudHNbYWNjb3VudElkXSA9IGtleVBhaXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXRTdGF0ZShuZXR3b3JrSWQsIHN0YXRlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEFjY291bnRzKG5ldHdvcmspIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlID0geWllbGQgdGhpcy5zdG9yYWdlLmdldFN0YXRlKG5ldHdvcmspO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlLmFjY291bnRzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEFjdGl2ZUFjY291bnQobmV0d29yaykge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB5aWVsZCB0aGlzLnN0b3JhZ2UuZ2V0U3RhdGUobmV0d29yayk7XG4gICAgICAgICAgICByZXR1cm4gc3RhdGUuYWN0aXZlQWNjb3VudDtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEtleShuZXR3b3JrSWQsIGFjY291bnRJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGUgPSB5aWVsZCB0aGlzLnN0b3JhZ2UuZ2V0U3RhdGUobmV0d29ya0lkKTtcbiAgICAgICAgICAgIGNvbnN0IHByaXZhdGVLZXkgPSBzdGF0ZS5hY2NvdW50c1thY2NvdW50SWRdO1xuICAgICAgICAgICAgaWYgKHByaXZhdGVLZXkgPT0gbnVsbClcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgRm9yICR7YWNjb3VudElkfSBpbiAke25ldHdvcmtJZH0gbmV0d29yayBrZXkgbm90IGZvdW5kYCk7XG4gICAgICAgICAgICBjb25zdCBrZXlQYWlyID0ga2V5X3BhaXJfMS5LZXlQYWlyLmZyb21TdHJpbmcocHJpdmF0ZUtleSk7XG4gICAgICAgICAgICByZXR1cm4ga2V5UGFpcjtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZUtleShuZXR3b3JrSWQsIGFjY291bnRJZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgbGV0IHN0YXRlID0geWllbGQgdGhpcy5zdG9yYWdlLmdldFN0YXRlKG5ldHdvcmtJZCk7XG4gICAgICAgICAgICBpZiAoc3RhdGUuYWN0aXZlQWNjb3VudCA9PT0gYWNjb3VudElkKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUuYWN0aXZlQWNjb3VudCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxldGUgc3RhdGUuYWNjb3VudHNbYWNjb3VudElkXTtcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXRTdGF0ZShuZXR3b3JrSWQsIHN0YXRlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldE5ldHdvcmtzKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgbGV0IHN0YXRlID0geWllbGQgdGhpcy5zdG9yYWdlLmdldEZ1bGxTdGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHN0YXRlLmFjY291bnRzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgdGhpcy5zdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmV4cG9ydHMuSGVyZUtleVN0b3JlID0gSGVyZUtleVN0b3JlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SGVyZUtleVN0b3JlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/HereKeyStore.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/JSONStorage.js":
/*!*************************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/JSONStorage.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.StateStorage = void 0;\nconst here_provider_1 = __webpack_require__(/*! ./here-provider */ \"(ssr)/./node_modules/@here-wallet/core/build/here-provider/index.js\");\nclass StateStorage {\n    constructor() {\n        this.dataKey = `herewallet:keystore`;\n        here_provider_1.waitInjectedHereWallet.then((injected) => {\n            if (!injected)\n                return;\n            this.setState(injected.network, {\n                accounts: { [injected.accountId]: injected.publicKey },\n                activeAccount: injected.accountId,\n            });\n        });\n    }\n    setState(network, state) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield here_provider_1.waitInjectedHereWallet;\n            const data = yield this.getFullState();\n            data[network] = state;\n            window.localStorage.setItem(this.dataKey, JSON.stringify(data));\n        });\n    }\n    getFullState() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield here_provider_1.waitInjectedHereWallet;\n            try {\n                return JSON.parse(window.localStorage.getItem(this.dataKey)) || {};\n            }\n            catch (_a) {\n                return {};\n            }\n        });\n    }\n    getState(network) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield here_provider_1.waitInjectedHereWallet;\n            const json = yield this.getFullState();\n            return json[network] || { activeAccount: null, accounts: {} };\n        });\n    }\n    clear() {\n        return __awaiter(this, void 0, void 0, function* () {\n            window.localStorage.removeItem(this.dataKey);\n        });\n    }\n}\nexports.StateStorage = StateStorage;\n//# sourceMappingURL=JSONStorage.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvSlNPTlN0b3JhZ2UuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELG9CQUFvQjtBQUNwQix3QkFBd0IsbUJBQU8sQ0FBQyw0RkFBaUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsMENBQTBDO0FBQ3RFO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVsbG8tbmVhci8uL25vZGVfbW9kdWxlcy9AaGVyZS13YWxsZXQvY29yZS9idWlsZC9KU09OU3RvcmFnZS5qcz9hNTVlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLlN0YXRlU3RvcmFnZSA9IHZvaWQgMDtcbmNvbnN0IGhlcmVfcHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL2hlcmUtcHJvdmlkZXJcIik7XG5jbGFzcyBTdGF0ZVN0b3JhZ2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRhdGFLZXkgPSBgaGVyZXdhbGxldDprZXlzdG9yZWA7XG4gICAgICAgIGhlcmVfcHJvdmlkZXJfMS53YWl0SW5qZWN0ZWRIZXJlV2FsbGV0LnRoZW4oKGluamVjdGVkKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWluamVjdGVkKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoaW5qZWN0ZWQubmV0d29yaywge1xuICAgICAgICAgICAgICAgIGFjY291bnRzOiB7IFtpbmplY3RlZC5hY2NvdW50SWRdOiBpbmplY3RlZC5wdWJsaWNLZXkgfSxcbiAgICAgICAgICAgICAgICBhY3RpdmVBY2NvdW50OiBpbmplY3RlZC5hY2NvdW50SWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldFN0YXRlKG5ldHdvcmssIHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB5aWVsZCBoZXJlX3Byb3ZpZGVyXzEud2FpdEluamVjdGVkSGVyZVdhbGxldDtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCB0aGlzLmdldEZ1bGxTdGF0ZSgpO1xuICAgICAgICAgICAgZGF0YVtuZXR3b3JrXSA9IHN0YXRlO1xuICAgICAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuZGF0YUtleSwgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0RnVsbFN0YXRlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgeWllbGQgaGVyZV9wcm92aWRlcl8xLndhaXRJbmplY3RlZEhlcmVXYWxsZXQ7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmRhdGFLZXkpKSB8fCB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFN0YXRlKG5ldHdvcmspIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHlpZWxkIGhlcmVfcHJvdmlkZXJfMS53YWl0SW5qZWN0ZWRIZXJlV2FsbGV0O1xuICAgICAgICAgICAgY29uc3QganNvbiA9IHlpZWxkIHRoaXMuZ2V0RnVsbFN0YXRlKCk7XG4gICAgICAgICAgICByZXR1cm4ganNvbltuZXR3b3JrXSB8fCB7IGFjdGl2ZUFjY291bnQ6IG51bGwsIGFjY291bnRzOiB7fSB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGhpcy5kYXRhS2V5KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5TdGF0ZVN0b3JhZ2UgPSBTdGF0ZVN0b3JhZ2U7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1KU09OU3RvcmFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/JSONStorage.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/WidgetStrategy.js":
/*!****************************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/WidgetStrategy.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.WidgetStrategy = exports.defaultUrl = void 0;\nconst createIframe = (widget) => {\n    const connector = document.createElement(\"iframe\");\n    connector.src = widget;\n    connector.allow = \"usb\";\n    connector.style.border = \"none\";\n    connector.style.zIndex = \"10000\";\n    connector.style.position = \"fixed\";\n    connector.style.display = \"none\";\n    connector.style.top = \"0\";\n    connector.style.left = \"0\";\n    connector.style.width = \"100%\";\n    connector.style.height = \"100%\";\n    document.body.appendChild(connector);\n    return connector;\n};\nexports.defaultUrl = \"https://my.herewallet.app/connector/index.html\";\nclass WidgetStrategy {\n    constructor(options = { widget: exports.defaultUrl, lazy: false }) {\n        this.options = {\n            lazy: typeof options === \"object\" ? options.lazy || false : false,\n            widget: typeof options === \"string\" ? options : options.widget || exports.defaultUrl,\n        };\n        if (!this.options.lazy) {\n            this.initIframe();\n        }\n    }\n    initIframe() {\n        if (WidgetStrategy.connector == null) {\n            WidgetStrategy.connector = createIframe(this.options.widget);\n            WidgetStrategy.connector.addEventListener(\"load\", () => {\n                WidgetStrategy.isLoaded = true;\n            });\n        }\n        return WidgetStrategy.connector;\n    }\n    onRequested(id, request, reject) {\n        const iframe = this.initIframe();\n        iframe.style.display = \"block\";\n        const loadHandler = () => {\n            var _a, _b, _c;\n            (_a = WidgetStrategy.connector) === null || _a === void 0 ? void 0 : _a.removeEventListener(\"load\", loadHandler);\n            (_c = (_b = WidgetStrategy.connector) === null || _b === void 0 ? void 0 : _b.contentWindow) === null || _c === void 0 ? void 0 : _c.postMessage(JSON.stringify({ type: \"request\", payload: { id, request } }), new URL(this.options.widget).origin);\n        };\n        if (WidgetStrategy.isLoaded)\n            loadHandler();\n        else\n            iframe.addEventListener(\"load\", loadHandler);\n        this.messageHandler = (event) => {\n            try {\n                if (event.origin !== new URL(this.options.widget).origin)\n                    return;\n                if (JSON.parse(event.data).type === \"reject\")\n                    reject();\n            }\n            catch (_a) { }\n        };\n        window.addEventListener(\"message\", this.messageHandler);\n    }\n    postMessage(data) {\n        var _a;\n        const iframe = this.initIframe();\n        const args = JSON.stringify(data);\n        const origin = new URL(this.options.widget).origin;\n        (_a = iframe.contentWindow) === null || _a === void 0 ? void 0 : _a.postMessage(args, origin);\n    }\n    onApproving() {\n        this.postMessage({ type: \"approving\" });\n    }\n    onSuccess(request) {\n        console.log(request);\n        this.postMessage({ type: \"result\", payload: { request } });\n        this.close();\n    }\n    onFailed(request) {\n        this.postMessage({ type: \"result\", payload: { request } });\n        this.close();\n    }\n    close() {\n        if (this.messageHandler) {\n            window.removeEventListener(\"message\", this.messageHandler);\n            this.messageHandler = undefined;\n        }\n        if (WidgetStrategy.connector) {\n            WidgetStrategy.connector.style.display = \"none\";\n        }\n    }\n}\nexports.WidgetStrategy = WidgetStrategy;\nWidgetStrategy.isLoaded = false;\n//# sourceMappingURL=WidgetStrategy.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvV2lkZ2V0U3RyYXRlZ3kuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsc0JBQXNCLEdBQUcsa0JBQWtCO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLDRCQUE0Qix5Q0FBeUM7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEtBQThLLDRCQUE0QixlQUFlO0FBQ3pOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixtQkFBbUI7QUFDOUM7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLDJCQUEyQixXQUFXO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiwyQkFBMkIsV0FBVztBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2hlbGxvLW5lYXIvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvV2lkZ2V0U3RyYXRlZ3kuanM/MDU4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuV2lkZ2V0U3RyYXRlZ3kgPSBleHBvcnRzLmRlZmF1bHRVcmwgPSB2b2lkIDA7XG5jb25zdCBjcmVhdGVJZnJhbWUgPSAod2lkZ2V0KSA9PiB7XG4gICAgY29uc3QgY29ubmVjdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlmcmFtZVwiKTtcbiAgICBjb25uZWN0b3Iuc3JjID0gd2lkZ2V0O1xuICAgIGNvbm5lY3Rvci5hbGxvdyA9IFwidXNiXCI7XG4gICAgY29ubmVjdG9yLnN0eWxlLmJvcmRlciA9IFwibm9uZVwiO1xuICAgIGNvbm5lY3Rvci5zdHlsZS56SW5kZXggPSBcIjEwMDAwXCI7XG4gICAgY29ubmVjdG9yLnN0eWxlLnBvc2l0aW9uID0gXCJmaXhlZFwiO1xuICAgIGNvbm5lY3Rvci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgY29ubmVjdG9yLnN0eWxlLnRvcCA9IFwiMFwiO1xuICAgIGNvbm5lY3Rvci5zdHlsZS5sZWZ0ID0gXCIwXCI7XG4gICAgY29ubmVjdG9yLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG4gICAgY29ubmVjdG9yLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29ubmVjdG9yKTtcbiAgICByZXR1cm4gY29ubmVjdG9yO1xufTtcbmV4cG9ydHMuZGVmYXVsdFVybCA9IFwiaHR0cHM6Ly9teS5oZXJld2FsbGV0LmFwcC9jb25uZWN0b3IvaW5kZXguaHRtbFwiO1xuY2xhc3MgV2lkZ2V0U3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMgPSB7IHdpZGdldDogZXhwb3J0cy5kZWZhdWx0VXJsLCBsYXp5OiBmYWxzZSB9KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGxhenk6IHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiID8gb3B0aW9ucy5sYXp5IHx8IGZhbHNlIDogZmFsc2UsXG4gICAgICAgICAgICB3aWRnZXQ6IHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiID8gb3B0aW9ucyA6IG9wdGlvbnMud2lkZ2V0IHx8IGV4cG9ydHMuZGVmYXVsdFVybCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMubGF6eSkge1xuICAgICAgICAgICAgdGhpcy5pbml0SWZyYW1lKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdElmcmFtZSgpIHtcbiAgICAgICAgaWYgKFdpZGdldFN0cmF0ZWd5LmNvbm5lY3RvciA9PSBudWxsKSB7XG4gICAgICAgICAgICBXaWRnZXRTdHJhdGVneS5jb25uZWN0b3IgPSBjcmVhdGVJZnJhbWUodGhpcy5vcHRpb25zLndpZGdldCk7XG4gICAgICAgICAgICBXaWRnZXRTdHJhdGVneS5jb25uZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgICAgICAgIFdpZGdldFN0cmF0ZWd5LmlzTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBXaWRnZXRTdHJhdGVneS5jb25uZWN0b3I7XG4gICAgfVxuICAgIG9uUmVxdWVzdGVkKGlkLCByZXF1ZXN0LCByZWplY3QpIHtcbiAgICAgICAgY29uc3QgaWZyYW1lID0gdGhpcy5pbml0SWZyYW1lKCk7XG4gICAgICAgIGlmcmFtZS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBjb25zdCBsb2FkSGFuZGxlciA9ICgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgKF9hID0gV2lkZ2V0U3RyYXRlZ3kuY29ubmVjdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgbG9hZEhhbmRsZXIpO1xuICAgICAgICAgICAgKF9jID0gKF9iID0gV2lkZ2V0U3RyYXRlZ3kuY29ubmVjdG9yKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY29udGVudFdpbmRvdykgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHsgdHlwZTogXCJyZXF1ZXN0XCIsIHBheWxvYWQ6IHsgaWQsIHJlcXVlc3QgfSB9KSwgbmV3IFVSTCh0aGlzLm9wdGlvbnMud2lkZ2V0KS5vcmlnaW4pO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoV2lkZ2V0U3RyYXRlZ3kuaXNMb2FkZWQpXG4gICAgICAgICAgICBsb2FkSGFuZGxlcigpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBpZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgbG9hZEhhbmRsZXIpO1xuICAgICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5vcmlnaW4gIT09IG5ldyBVUkwodGhpcy5vcHRpb25zLndpZGdldCkub3JpZ2luKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKEpTT04ucGFyc2UoZXZlbnQuZGF0YSkudHlwZSA9PT0gXCJyZWplY3RcIilcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICB9O1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5tZXNzYWdlSGFuZGxlcik7XG4gICAgfVxuICAgIHBvc3RNZXNzYWdlKGRhdGEpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zdCBpZnJhbWUgPSB0aGlzLmluaXRJZnJhbWUoKTtcbiAgICAgICAgY29uc3QgYXJncyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgICAgICBjb25zdCBvcmlnaW4gPSBuZXcgVVJMKHRoaXMub3B0aW9ucy53aWRnZXQpLm9yaWdpbjtcbiAgICAgICAgKF9hID0gaWZyYW1lLmNvbnRlbnRXaW5kb3cpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wb3N0TWVzc2FnZShhcmdzLCBvcmlnaW4pO1xuICAgIH1cbiAgICBvbkFwcHJvdmluZygpIHtcbiAgICAgICAgdGhpcy5wb3N0TWVzc2FnZSh7IHR5cGU6IFwiYXBwcm92aW5nXCIgfSk7XG4gICAgfVxuICAgIG9uU3VjY2VzcyhyZXF1ZXN0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcXVlc3QpO1xuICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHsgdHlwZTogXCJyZXN1bHRcIiwgcGF5bG9hZDogeyByZXF1ZXN0IH0gfSk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICAgb25GYWlsZWQocmVxdWVzdCkge1xuICAgICAgICB0aGlzLnBvc3RNZXNzYWdlKHsgdHlwZTogXCJyZXN1bHRcIiwgcGF5bG9hZDogeyByZXF1ZXN0IH0gfSk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLm1lc3NhZ2VIYW5kbGVyKSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgdGhpcy5tZXNzYWdlSGFuZGxlcik7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChXaWRnZXRTdHJhdGVneS5jb25uZWN0b3IpIHtcbiAgICAgICAgICAgIFdpZGdldFN0cmF0ZWd5LmNvbm5lY3Rvci5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnRzLldpZGdldFN0cmF0ZWd5ID0gV2lkZ2V0U3RyYXRlZ3k7XG5XaWRnZXRTdHJhdGVneS5pc0xvYWRlZCA9IGZhbHNlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9V2lkZ2V0U3RyYXRlZ3kuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/WidgetStrategy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/WindowStrategy.js":
/*!****************************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/WindowStrategy.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.WindowStrategy = void 0;\nclass WindowStrategy {\n    constructor(endpoint = \"https://my.herewallet.app\") {\n        this.endpoint = endpoint;\n        this.signWindow = null;\n        this.onFailed = () => this.close();\n        this.onSuccess = () => this.close();\n    }\n    onInitialized() {\n        if (this.signWindow)\n            return;\n        const left = window.innerWidth / 2 - 420 / 2;\n        const top = window.innerHeight / 2 - 700 / 2;\n        this.signWindow = window.open(`${this.endpoint}/loading`, \"_blank\", `popup=1,width=420,height=700,top=${top},left=${left}`);\n    }\n    onRequested(id, request, reject) {\n        if (this.signWindow == null)\n            return;\n        this.unloadHandler = () => { var _a; return (_a = this.signWindow) === null || _a === void 0 ? void 0 : _a.close(); };\n        window.addEventListener(\"beforeunload\", this.unloadHandler);\n        this.signWindow.location = `${this.endpoint}/request/${id}`;\n        this.timerHandler = setInterval(() => {\n            var _a;\n            if ((_a = this.signWindow) === null || _a === void 0 ? void 0 : _a.closed)\n                reject(\"CLOSED\");\n        }, 1000);\n    }\n    close() {\n        var _a;\n        clearInterval(this.timerHandler);\n        (_a = this.signWindow) === null || _a === void 0 ? void 0 : _a.close();\n        this.signWindow = null;\n        if (this.unloadHandler) {\n            window.removeEventListener(\"beforeunload\", this.unloadHandler);\n        }\n    }\n}\nexports.WindowStrategy = WindowStrategy;\n//# sourceMappingURL=WindowStrategy.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvV2luZG93U3RyYXRlZ3kuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxjQUFjLHlEQUF5RCxJQUFJLFFBQVEsS0FBSztBQUNqSTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxRQUFRO0FBQzdDO0FBQ0Esc0NBQXNDLGNBQWMsV0FBVyxHQUFHO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWxsby1uZWFyLy4vbm9kZV9tb2R1bGVzL0BoZXJlLXdhbGxldC9jb3JlL2J1aWxkL1dpbmRvd1N0cmF0ZWd5LmpzPzI0ZDUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLldpbmRvd1N0cmF0ZWd5ID0gdm9pZCAwO1xuY2xhc3MgV2luZG93U3RyYXRlZ3kge1xuICAgIGNvbnN0cnVjdG9yKGVuZHBvaW50ID0gXCJodHRwczovL215LmhlcmV3YWxsZXQuYXBwXCIpIHtcbiAgICAgICAgdGhpcy5lbmRwb2ludCA9IGVuZHBvaW50O1xuICAgICAgICB0aGlzLnNpZ25XaW5kb3cgPSBudWxsO1xuICAgICAgICB0aGlzLm9uRmFpbGVkID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLm9uU3VjY2VzcyA9ICgpID0+IHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICAgb25Jbml0aWFsaXplZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2lnbldpbmRvdylcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgbGVmdCA9IHdpbmRvdy5pbm5lcldpZHRoIC8gMiAtIDQyMCAvIDI7XG4gICAgICAgIGNvbnN0IHRvcCA9IHdpbmRvdy5pbm5lckhlaWdodCAvIDIgLSA3MDAgLyAyO1xuICAgICAgICB0aGlzLnNpZ25XaW5kb3cgPSB3aW5kb3cub3BlbihgJHt0aGlzLmVuZHBvaW50fS9sb2FkaW5nYCwgXCJfYmxhbmtcIiwgYHBvcHVwPTEsd2lkdGg9NDIwLGhlaWdodD03MDAsdG9wPSR7dG9wfSxsZWZ0PSR7bGVmdH1gKTtcbiAgICB9XG4gICAgb25SZXF1ZXN0ZWQoaWQsIHJlcXVlc3QsIHJlamVjdCkge1xuICAgICAgICBpZiAodGhpcy5zaWduV2luZG93ID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMudW5sb2FkSGFuZGxlciA9ICgpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gdGhpcy5zaWduV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xvc2UoKTsgfTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgdGhpcy51bmxvYWRIYW5kbGVyKTtcbiAgICAgICAgdGhpcy5zaWduV2luZG93LmxvY2F0aW9uID0gYCR7dGhpcy5lbmRwb2ludH0vcmVxdWVzdC8ke2lkfWA7XG4gICAgICAgIHRoaXMudGltZXJIYW5kbGVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgaWYgKChfYSA9IHRoaXMuc2lnbldpbmRvdykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsb3NlZClcbiAgICAgICAgICAgICAgICByZWplY3QoXCJDTE9TRURcIik7XG4gICAgICAgIH0sIDEwMDApO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXJIYW5kbGVyKTtcbiAgICAgICAgKF9hID0gdGhpcy5zaWduV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5zaWduV2luZG93ID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMudW5sb2FkSGFuZGxlcikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJiZWZvcmV1bmxvYWRcIiwgdGhpcy51bmxvYWRIYW5kbGVyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmV4cG9ydHMuV2luZG93U3RyYXRlZ3kgPSBXaW5kb3dTdHJhdGVneTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVdpbmRvd1N0cmF0ZWd5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/WindowStrategy.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/actions/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/actions/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createAction = exports.parseArgs = void 0;\nconst bn_js_1 = __webpack_require__(/*! bn.js */ \"(ssr)/./node_modules/bn.js/lib/bn.js\");\nconst near_api_js_1 = __webpack_require__(/*! near-api-js */ \"(ssr)/./node_modules/near-api-js/lib/index.js\");\nconst getAccessKey = (permission) => {\n    if (permission === \"FullAccess\") {\n        return near_api_js_1.transactions.fullAccessKey();\n    }\n    const { receiverId, methodNames = [] } = permission;\n    const allowance = permission.allowance ? new bn_js_1.BN(permission.allowance) : undefined;\n    return near_api_js_1.transactions.functionCallAccessKey(receiverId, methodNames, allowance);\n};\nconst parseArgs = (data) => {\n    if (typeof data === \"string\")\n        return Buffer.from(data, \"base64\");\n    return data;\n};\nexports.parseArgs = parseArgs;\nconst createAction = (action) => {\n    switch (action.type) {\n        case \"CreateAccount\":\n            return near_api_js_1.transactions.createAccount();\n        case \"DeployContract\": {\n            const { code } = action.params;\n            return near_api_js_1.transactions.deployContract(code);\n        }\n        case \"FunctionCall\": {\n            const { methodName, args, gas, deposit } = action.params;\n            return near_api_js_1.transactions.functionCall(methodName, (0, exports.parseArgs)(args), new bn_js_1.BN(gas), new bn_js_1.BN(deposit));\n        }\n        case \"Transfer\": {\n            const { deposit } = action.params;\n            return near_api_js_1.transactions.transfer(new bn_js_1.BN(deposit));\n        }\n        case \"Stake\": {\n            const { stake, publicKey } = action.params;\n            return near_api_js_1.transactions.stake(new bn_js_1.BN(stake), near_api_js_1.utils.PublicKey.from(publicKey));\n        }\n        case \"AddKey\": {\n            const { publicKey, accessKey } = action.params;\n            return near_api_js_1.transactions.addKey(near_api_js_1.utils.PublicKey.from(publicKey), // TODO: Use accessKey.nonce? near-api-js seems to think 0 is fine?\n            getAccessKey(accessKey.permission));\n        }\n        case \"DeleteKey\": {\n            const { publicKey } = action.params;\n            return near_api_js_1.transactions.deleteKey(near_api_js_1.utils.PublicKey.from(publicKey));\n        }\n        case \"DeleteAccount\": {\n            const { beneficiaryId } = action.params;\n            return near_api_js_1.transactions.deleteAccount(beneficiaryId);\n        }\n        default:\n            throw new Error(\"Invalid action type\");\n    }\n};\nexports.createAction = createAction;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvYWN0aW9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCxvQkFBb0IsR0FBRyxpQkFBaUI7QUFDeEMsZ0JBQWdCLG1CQUFPLENBQUMsbURBQU87QUFDL0Isc0JBQXNCLG1CQUFPLENBQUMsa0VBQWE7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLCtCQUErQjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsT0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUNBQWlDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHVCQUF1QjtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnQkFBZ0I7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVsbG8tbmVhci8uL25vZGVfbW9kdWxlcy9AaGVyZS13YWxsZXQvY29yZS9idWlsZC9hY3Rpb25zL2luZGV4LmpzP2M1MGUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmNyZWF0ZUFjdGlvbiA9IGV4cG9ydHMucGFyc2VBcmdzID0gdm9pZCAwO1xuY29uc3QgYm5fanNfMSA9IHJlcXVpcmUoXCJibi5qc1wiKTtcbmNvbnN0IG5lYXJfYXBpX2pzXzEgPSByZXF1aXJlKFwibmVhci1hcGktanNcIik7XG5jb25zdCBnZXRBY2Nlc3NLZXkgPSAocGVybWlzc2lvbikgPT4ge1xuICAgIGlmIChwZXJtaXNzaW9uID09PSBcIkZ1bGxBY2Nlc3NcIikge1xuICAgICAgICByZXR1cm4gbmVhcl9hcGlfanNfMS50cmFuc2FjdGlvbnMuZnVsbEFjY2Vzc0tleSgpO1xuICAgIH1cbiAgICBjb25zdCB7IHJlY2VpdmVySWQsIG1ldGhvZE5hbWVzID0gW10gfSA9IHBlcm1pc3Npb247XG4gICAgY29uc3QgYWxsb3dhbmNlID0gcGVybWlzc2lvbi5hbGxvd2FuY2UgPyBuZXcgYm5fanNfMS5CTihwZXJtaXNzaW9uLmFsbG93YW5jZSkgOiB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIG5lYXJfYXBpX2pzXzEudHJhbnNhY3Rpb25zLmZ1bmN0aW9uQ2FsbEFjY2Vzc0tleShyZWNlaXZlcklkLCBtZXRob2ROYW1lcywgYWxsb3dhbmNlKTtcbn07XG5jb25zdCBwYXJzZUFyZ3MgPSAoZGF0YSkgPT4ge1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGRhdGEsIFwiYmFzZTY0XCIpO1xuICAgIHJldHVybiBkYXRhO1xufTtcbmV4cG9ydHMucGFyc2VBcmdzID0gcGFyc2VBcmdzO1xuY29uc3QgY3JlYXRlQWN0aW9uID0gKGFjdGlvbikgPT4ge1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcIkNyZWF0ZUFjY291bnRcIjpcbiAgICAgICAgICAgIHJldHVybiBuZWFyX2FwaV9qc18xLnRyYW5zYWN0aW9ucy5jcmVhdGVBY2NvdW50KCk7XG4gICAgICAgIGNhc2UgXCJEZXBsb3lDb250cmFjdFwiOiB7XG4gICAgICAgICAgICBjb25zdCB7IGNvZGUgfSA9IGFjdGlvbi5wYXJhbXM7XG4gICAgICAgICAgICByZXR1cm4gbmVhcl9hcGlfanNfMS50cmFuc2FjdGlvbnMuZGVwbG95Q29udHJhY3QoY29kZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcIkZ1bmN0aW9uQ2FsbFwiOiB7XG4gICAgICAgICAgICBjb25zdCB7IG1ldGhvZE5hbWUsIGFyZ3MsIGdhcywgZGVwb3NpdCB9ID0gYWN0aW9uLnBhcmFtcztcbiAgICAgICAgICAgIHJldHVybiBuZWFyX2FwaV9qc18xLnRyYW5zYWN0aW9ucy5mdW5jdGlvbkNhbGwobWV0aG9kTmFtZSwgKDAsIGV4cG9ydHMucGFyc2VBcmdzKShhcmdzKSwgbmV3IGJuX2pzXzEuQk4oZ2FzKSwgbmV3IGJuX2pzXzEuQk4oZGVwb3NpdCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJUcmFuc2ZlclwiOiB7XG4gICAgICAgICAgICBjb25zdCB7IGRlcG9zaXQgfSA9IGFjdGlvbi5wYXJhbXM7XG4gICAgICAgICAgICByZXR1cm4gbmVhcl9hcGlfanNfMS50cmFuc2FjdGlvbnMudHJhbnNmZXIobmV3IGJuX2pzXzEuQk4oZGVwb3NpdCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJTdGFrZVwiOiB7XG4gICAgICAgICAgICBjb25zdCB7IHN0YWtlLCBwdWJsaWNLZXkgfSA9IGFjdGlvbi5wYXJhbXM7XG4gICAgICAgICAgICByZXR1cm4gbmVhcl9hcGlfanNfMS50cmFuc2FjdGlvbnMuc3Rha2UobmV3IGJuX2pzXzEuQk4oc3Rha2UpLCBuZWFyX2FwaV9qc18xLnV0aWxzLlB1YmxpY0tleS5mcm9tKHB1YmxpY0tleSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJBZGRLZXlcIjoge1xuICAgICAgICAgICAgY29uc3QgeyBwdWJsaWNLZXksIGFjY2Vzc0tleSB9ID0gYWN0aW9uLnBhcmFtcztcbiAgICAgICAgICAgIHJldHVybiBuZWFyX2FwaV9qc18xLnRyYW5zYWN0aW9ucy5hZGRLZXkobmVhcl9hcGlfanNfMS51dGlscy5QdWJsaWNLZXkuZnJvbShwdWJsaWNLZXkpLCAvLyBUT0RPOiBVc2UgYWNjZXNzS2V5Lm5vbmNlPyBuZWFyLWFwaS1qcyBzZWVtcyB0byB0aGluayAwIGlzIGZpbmU/XG4gICAgICAgICAgICBnZXRBY2Nlc3NLZXkoYWNjZXNzS2V5LnBlcm1pc3Npb24pKTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlIFwiRGVsZXRlS2V5XCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHsgcHVibGljS2V5IH0gPSBhY3Rpb24ucGFyYW1zO1xuICAgICAgICAgICAgcmV0dXJuIG5lYXJfYXBpX2pzXzEudHJhbnNhY3Rpb25zLmRlbGV0ZUtleShuZWFyX2FwaV9qc18xLnV0aWxzLlB1YmxpY0tleS5mcm9tKHB1YmxpY0tleSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJEZWxldGVBY2NvdW50XCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHsgYmVuZWZpY2lhcnlJZCB9ID0gYWN0aW9uLnBhcmFtcztcbiAgICAgICAgICAgIHJldHVybiBuZWFyX2FwaV9qc18xLnRyYW5zYWN0aW9ucy5kZWxldGVBY2NvdW50KGJlbmVmaWNpYXJ5SWQpO1xuICAgICAgICB9XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFjdGlvbiB0eXBlXCIpO1xuICAgIH1cbn07XG5leHBvcnRzLmNyZWF0ZUFjdGlvbiA9IGNyZWF0ZUFjdGlvbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/actions/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/actions/types.js":
/*!***************************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/actions/types.js ***!
  \***************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvYWN0aW9ucy90eXBlcy5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiLDhDQUE2QyxFQUFFLGFBQWEsRUFBQztBQUM3RCIsInNvdXJjZXMiOlsid2VicGFjazovL2hlbGxvLW5lYXIvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvYWN0aW9ucy90eXBlcy5qcz9hMzM4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/actions/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/here-provider/index.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/here-provider/index.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.proxyProvider = exports.waitInjectedHereWallet = exports.getRequest = exports.proxyApi = exports.deleteRequest = exports.getResponse = exports.createRequest = void 0;\nconst uuid4_1 = __importDefault(__webpack_require__(/*! uuid4 */ \"(ssr)/./node_modules/uuid4/index.mjs\"));\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/@here-wallet/core/build/utils.js\");\nconst provider_1 = __webpack_require__(/*! ../provider */ \"(ssr)/./node_modules/@here-wallet/core/build/provider.js\");\nconst methods_1 = __webpack_require__(/*! ./methods */ \"(ssr)/./node_modules/@here-wallet/core/build/here-provider/methods.js\");\nObject.defineProperty(exports, \"createRequest\", ({ enumerable: true, get: function () { return methods_1.createRequest; } }));\nObject.defineProperty(exports, \"getResponse\", ({ enumerable: true, get: function () { return methods_1.getResponse; } }));\nObject.defineProperty(exports, \"deleteRequest\", ({ enumerable: true, get: function () { return methods_1.deleteRequest; } }));\nObject.defineProperty(exports, \"proxyApi\", ({ enumerable: true, get: function () { return methods_1.proxyApi; } }));\nObject.defineProperty(exports, \"getRequest\", ({ enumerable: true, get: function () { return methods_1.getRequest; } }));\nexports.waitInjectedHereWallet = new Promise((resolve) => {\n    if (typeof window === \"undefined\")\n        return resolve(null);\n    if (window.self === window.top)\n        return resolve(null);\n    const handler = (e) => {\n        if (e.data.type !== \"here-wallet-injected\")\n            return;\n        window.parent.postMessage(\"here-sdk-init\", \"*\");\n        window.removeEventListener(\"message\", handler);\n        resolve({ accountId: e.data.accountId, publicKey: e.data.publicKey, network: e.data.network || \"mainnet\" });\n    };\n    window.addEventListener(\"message\", handler);\n    setTimeout(() => resolve(null), 2000);\n});\nconst proxyProvider = (conf) => __awaiter(void 0, void 0, void 0, function* () {\n    const isInjected = yield exports.waitInjectedHereWallet;\n    if (isInjected && typeof window !== \"undefined\") {\n        return new Promise((resolve) => {\n            const id = (0, uuid4_1.default)();\n            const handler = (e) => {\n                if (e.data.id !== id)\n                    return;\n                if (e.data.status === provider_1.HereProviderStatus.SUCCESS || e.data.status === provider_1.HereProviderStatus.FAILED) {\n                    window.removeEventListener(\"message\", handler);\n                    return resolve(e.data);\n                }\n            };\n            window.parent.postMessage(Object.assign(Object.assign({ $here: true }, conf.request), { id }), \"*\");\n            window.addEventListener(\"message\", handler);\n        });\n    }\n    let { strategy, request, disableCleanupRequest, id, signal } = conf, delegate = __rest(conf, [\"strategy\", \"request\", \"disableCleanupRequest\", \"id\", \"signal\"]);\n    if (id != null)\n        request = yield (0, methods_1.getRequest)(id, signal);\n    else\n        id = yield (0, methods_1.createRequest)(request, signal);\n    return new Promise((resolve, reject) => {\n        var _a, _b;\n        const socketApi = methods_1.proxyApi.replace(\"https\", \"wss\");\n        let fallbackHttpTimer = null;\n        let socket = null;\n        const clear = () => __awaiter(void 0, void 0, void 0, function* () {\n            fallbackHttpTimer = -1;\n            clearInterval(fallbackHttpTimer);\n            socket === null || socket === void 0 ? void 0 : socket.close();\n            if (disableCleanupRequest !== true) {\n                yield (0, methods_1.deleteRequest)(id);\n            }\n        });\n        const processApprove = (data) => {\n            var _a, _b, _c, _d, _e, _f;\n            switch (data.status) {\n                case provider_1.HereProviderStatus.APPROVING:\n                    (_a = delegate.onApproving) === null || _a === void 0 ? void 0 : _a.call(delegate, data);\n                    (_b = strategy === null || strategy === void 0 ? void 0 : strategy.onApproving) === null || _b === void 0 ? void 0 : _b.call(strategy, data);\n                    return;\n                case provider_1.HereProviderStatus.FAILED:\n                    clear();\n                    reject(new provider_1.HereProviderError(data.payload));\n                    (_c = delegate.onFailed) === null || _c === void 0 ? void 0 : _c.call(delegate, data);\n                    (_d = strategy === null || strategy === void 0 ? void 0 : strategy.onFailed) === null || _d === void 0 ? void 0 : _d.call(strategy, data);\n                    return;\n                case provider_1.HereProviderStatus.SUCCESS:\n                    clear();\n                    resolve(data);\n                    (_e = delegate.onSuccess) === null || _e === void 0 ? void 0 : _e.call(delegate, data);\n                    (_f = strategy === null || strategy === void 0 ? void 0 : strategy.onSuccess) === null || _f === void 0 ? void 0 : _f.call(strategy, data);\n                    return;\n            }\n        };\n        const rejectAction = (payload) => {\n            var _a;\n            processApprove({\n                type: ((_a = request.selector) === null || _a === void 0 ? void 0 : _a.type) || \"local\",\n                status: provider_1.HereProviderStatus.FAILED,\n                payload,\n            });\n        };\n        (_a = delegate.onRequested) === null || _a === void 0 ? void 0 : _a.call(delegate, id, request, rejectAction);\n        (_b = strategy === null || strategy === void 0 ? void 0 : strategy.onRequested) === null || _b === void 0 ? void 0 : _b.call(strategy, id, request, rejectAction);\n        signal === null || signal === void 0 ? void 0 : signal.addEventListener(\"abort\", () => rejectAction());\n        const setupTimer = () => {\n            if (fallbackHttpTimer === -1) {\n                return;\n            }\n            fallbackHttpTimer = setTimeout(() => __awaiter(void 0, void 0, void 0, function* () {\n                var _a, _b, _c, _d;\n                try {\n                    const data = yield (0, methods_1.getResponse)(id);\n                    if (fallbackHttpTimer === -1)\n                        return;\n                    processApprove(data);\n                    setupTimer();\n                }\n                catch (e) {\n                    const status = provider_1.HereProviderStatus.FAILED;\n                    const error = e instanceof Error ? e : undefined;\n                    const payload = error === null || error === void 0 ? void 0 : error.message;\n                    clear();\n                    reject(new provider_1.HereProviderError(payload, error));\n                    (_a = delegate.onFailed) === null || _a === void 0 ? void 0 : _a.call(delegate, { type: ((_b = request.selector) === null || _b === void 0 ? void 0 : _b.type) || \"local\", status, payload });\n                    (_c = strategy === null || strategy === void 0 ? void 0 : strategy.onFailed) === null || _c === void 0 ? void 0 : _c.call(strategy, { type: ((_d = request.selector) === null || _d === void 0 ? void 0 : _d.type) || \"local\", status, payload });\n                }\n            }), 3000);\n        };\n        setupTimer();\n        // Mobile flow doesn't support cross tabs socket background process\n        if ((0, utils_1.isMobile)() === false) {\n            const endpoint = `${socketApi}/ws/${id}`;\n            socket = new WebSocket(endpoint);\n            socket.onmessage = (e) => {\n                if (e.data == null)\n                    return;\n                try {\n                    const data = JSON.parse(e.data);\n                    processApprove(data);\n                }\n                catch (_a) {\n                    // nope\n                }\n            };\n        }\n    });\n});\nexports.proxyProvider = proxyProvider;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvaGVyZS1wcm92aWRlci9pbmRleC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZELGNBQWM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHFCQUFxQixHQUFHLDhCQUE4QixHQUFHLGtCQUFrQixHQUFHLGdCQUFnQixHQUFHLHFCQUFxQixHQUFHLG1CQUFtQixHQUFHLHFCQUFxQjtBQUNwSyxnQ0FBZ0MsbUJBQU8sQ0FBQyxtREFBTztBQUMvQyxnQkFBZ0IsbUJBQU8sQ0FBQyx1RUFBVTtBQUNsQyxtQkFBbUIsbUJBQU8sQ0FBQyw2RUFBYTtBQUN4QyxrQkFBa0IsbUJBQU8sQ0FBQyx3RkFBVztBQUNyQyxpREFBZ0QsRUFBRSxxQ0FBcUMsbUNBQW1DLEVBQUM7QUFDM0gsK0NBQThDLEVBQUUscUNBQXFDLGlDQUFpQyxFQUFDO0FBQ3ZILGlEQUFnRCxFQUFFLHFDQUFxQyxtQ0FBbUMsRUFBQztBQUMzSCw0Q0FBMkMsRUFBRSxxQ0FBcUMsOEJBQThCLEVBQUM7QUFDakgsOENBQTZDLEVBQUUscUNBQXFDLGdDQUFnQyxFQUFDO0FBQ3JILDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsZ0dBQWdHO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxhQUFhLG1CQUFtQixJQUFJO0FBQ3hHO0FBQ0EsU0FBUztBQUNUO0FBQ0EsVUFBVSx1REFBdUQ7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzR0FBc0csMEdBQTBHO0FBQ2hOLDBKQUEwSiwwR0FBMEc7QUFDcFE7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsVUFBVSxNQUFNLEdBQUc7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNELHFCQUFxQjtBQUNyQiIsInNvdXJjZXMiOlsid2VicGFjazovL2hlbGxvLW5lYXIvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvaGVyZS1wcm92aWRlci9pbmRleC5qcz8wZTBhIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19yZXN0ID0gKHRoaXMgJiYgdGhpcy5fX3Jlc3QpIHx8IGZ1bmN0aW9uIChzLCBlKSB7XG4gICAgdmFyIHQgPSB7fTtcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcbiAgICAgICAgdFtwXSA9IHNbcF07XG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XG4gICAgICAgIH1cbiAgICByZXR1cm4gdDtcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLnByb3h5UHJvdmlkZXIgPSBleHBvcnRzLndhaXRJbmplY3RlZEhlcmVXYWxsZXQgPSBleHBvcnRzLmdldFJlcXVlc3QgPSBleHBvcnRzLnByb3h5QXBpID0gZXhwb3J0cy5kZWxldGVSZXF1ZXN0ID0gZXhwb3J0cy5nZXRSZXNwb25zZSA9IGV4cG9ydHMuY3JlYXRlUmVxdWVzdCA9IHZvaWQgMDtcbmNvbnN0IHV1aWQ0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcInV1aWQ0XCIpKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5jb25zdCBwcm92aWRlcl8xID0gcmVxdWlyZShcIi4uL3Byb3ZpZGVyXCIpO1xuY29uc3QgbWV0aG9kc18xID0gcmVxdWlyZShcIi4vbWV0aG9kc1wiKTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNyZWF0ZVJlcXVlc3RcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1ldGhvZHNfMS5jcmVhdGVSZXF1ZXN0OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZ2V0UmVzcG9uc2VcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1ldGhvZHNfMS5nZXRSZXNwb25zZTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImRlbGV0ZVJlcXVlc3RcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1ldGhvZHNfMS5kZWxldGVSZXF1ZXN0OyB9IH0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicHJveHlBcGlcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1ldGhvZHNfMS5wcm94eUFwaTsgfSB9KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImdldFJlcXVlc3RcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG1ldGhvZHNfMS5nZXRSZXF1ZXN0OyB9IH0pO1xuZXhwb3J0cy53YWl0SW5qZWN0ZWRIZXJlV2FsbGV0ID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgICAgcmV0dXJuIHJlc29sdmUobnVsbCk7XG4gICAgaWYgKHdpbmRvdy5zZWxmID09PSB3aW5kb3cudG9wKVxuICAgICAgICByZXR1cm4gcmVzb2x2ZShudWxsKTtcbiAgICBjb25zdCBoYW5kbGVyID0gKGUpID0+IHtcbiAgICAgICAgaWYgKGUuZGF0YS50eXBlICE9PSBcImhlcmUtd2FsbGV0LWluamVjdGVkXCIpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoXCJoZXJlLXNkay1pbml0XCIsIFwiKlwiKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGhhbmRsZXIpO1xuICAgICAgICByZXNvbHZlKHsgYWNjb3VudElkOiBlLmRhdGEuYWNjb3VudElkLCBwdWJsaWNLZXk6IGUuZGF0YS5wdWJsaWNLZXksIG5ldHdvcms6IGUuZGF0YS5uZXR3b3JrIHx8IFwibWFpbm5ldFwiIH0pO1xuICAgIH07XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGhhbmRsZXIpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4gcmVzb2x2ZShudWxsKSwgMjAwMCk7XG59KTtcbmNvbnN0IHByb3h5UHJvdmlkZXIgPSAoY29uZikgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgaXNJbmplY3RlZCA9IHlpZWxkIGV4cG9ydHMud2FpdEluamVjdGVkSGVyZVdhbGxldDtcbiAgICBpZiAoaXNJbmplY3RlZCAmJiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaWQgPSAoMCwgdXVpZDRfMS5kZWZhdWx0KSgpO1xuICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGUuZGF0YS5pZCAhPT0gaWQpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBpZiAoZS5kYXRhLnN0YXR1cyA9PT0gcHJvdmlkZXJfMS5IZXJlUHJvdmlkZXJTdGF0dXMuU1VDQ0VTUyB8fCBlLmRhdGEuc3RhdHVzID09PSBwcm92aWRlcl8xLkhlcmVQcm92aWRlclN0YXR1cy5GQUlMRUQpIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGhhbmRsZXIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShlLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7ICRoZXJlOiB0cnVlIH0sIGNvbmYucmVxdWVzdCksIHsgaWQgfSksIFwiKlwiKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBoYW5kbGVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxldCB7IHN0cmF0ZWd5LCByZXF1ZXN0LCBkaXNhYmxlQ2xlYW51cFJlcXVlc3QsIGlkLCBzaWduYWwgfSA9IGNvbmYsIGRlbGVnYXRlID0gX19yZXN0KGNvbmYsIFtcInN0cmF0ZWd5XCIsIFwicmVxdWVzdFwiLCBcImRpc2FibGVDbGVhbnVwUmVxdWVzdFwiLCBcImlkXCIsIFwic2lnbmFsXCJdKTtcbiAgICBpZiAoaWQgIT0gbnVsbClcbiAgICAgICAgcmVxdWVzdCA9IHlpZWxkICgwLCBtZXRob2RzXzEuZ2V0UmVxdWVzdCkoaWQsIHNpZ25hbCk7XG4gICAgZWxzZVxuICAgICAgICBpZCA9IHlpZWxkICgwLCBtZXRob2RzXzEuY3JlYXRlUmVxdWVzdCkocmVxdWVzdCwgc2lnbmFsKTtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBzb2NrZXRBcGkgPSBtZXRob2RzXzEucHJveHlBcGkucmVwbGFjZShcImh0dHBzXCIsIFwid3NzXCIpO1xuICAgICAgICBsZXQgZmFsbGJhY2tIdHRwVGltZXIgPSBudWxsO1xuICAgICAgICBsZXQgc29ja2V0ID0gbnVsbDtcbiAgICAgICAgY29uc3QgY2xlYXIgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGZhbGxiYWNrSHR0cFRpbWVyID0gLTE7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGZhbGxiYWNrSHR0cFRpbWVyKTtcbiAgICAgICAgICAgIHNvY2tldCA9PT0gbnVsbCB8fCBzb2NrZXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNvY2tldC5jbG9zZSgpO1xuICAgICAgICAgICAgaWYgKGRpc2FibGVDbGVhbnVwUmVxdWVzdCAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHlpZWxkICgwLCBtZXRob2RzXzEuZGVsZXRlUmVxdWVzdCkoaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgcHJvY2Vzc0FwcHJvdmUgPSAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgICAgICAgICBzd2l0Y2ggKGRhdGEuc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBwcm92aWRlcl8xLkhlcmVQcm92aWRlclN0YXR1cy5BUFBST1ZJTkc6XG4gICAgICAgICAgICAgICAgICAgIChfYSA9IGRlbGVnYXRlLm9uQXBwcm92aW5nKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChkZWxlZ2F0ZSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIChfYiA9IHN0cmF0ZWd5ID09PSBudWxsIHx8IHN0cmF0ZWd5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdHJhdGVneS5vbkFwcHJvdmluZykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoc3RyYXRlZ3ksIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgY2FzZSBwcm92aWRlcl8xLkhlcmVQcm92aWRlclN0YXR1cy5GQUlMRUQ6XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgcHJvdmlkZXJfMS5IZXJlUHJvdmlkZXJFcnJvcihkYXRhLnBheWxvYWQpKTtcbiAgICAgICAgICAgICAgICAgICAgKF9jID0gZGVsZWdhdGUub25GYWlsZWQpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5jYWxsKGRlbGVnYXRlLCBkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgKF9kID0gc3RyYXRlZ3kgPT09IG51bGwgfHwgc3RyYXRlZ3kgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0cmF0ZWd5Lm9uRmFpbGVkKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuY2FsbChzdHJhdGVneSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBjYXNlIHByb3ZpZGVyXzEuSGVyZVByb3ZpZGVyU3RhdHVzLlNVQ0NFU1M6XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIChfZSA9IGRlbGVnYXRlLm9uU3VjY2VzcykgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLmNhbGwoZGVsZWdhdGUsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAoX2YgPSBzdHJhdGVneSA9PT0gbnVsbCB8fCBzdHJhdGVneSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc3RyYXRlZ3kub25TdWNjZXNzKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YuY2FsbChzdHJhdGVneSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcmVqZWN0QWN0aW9uID0gKHBheWxvYWQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHByb2Nlc3NBcHByb3ZlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAoKF9hID0gcmVxdWVzdC5zZWxlY3RvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnR5cGUpIHx8IFwibG9jYWxcIixcbiAgICAgICAgICAgICAgICBzdGF0dXM6IHByb3ZpZGVyXzEuSGVyZVByb3ZpZGVyU3RhdHVzLkZBSUxFRCxcbiAgICAgICAgICAgICAgICBwYXlsb2FkLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIChfYSA9IGRlbGVnYXRlLm9uUmVxdWVzdGVkKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY2FsbChkZWxlZ2F0ZSwgaWQsIHJlcXVlc3QsIHJlamVjdEFjdGlvbik7XG4gICAgICAgIChfYiA9IHN0cmF0ZWd5ID09PSBudWxsIHx8IHN0cmF0ZWd5ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdHJhdGVneS5vblJlcXVlc3RlZCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNhbGwoc3RyYXRlZ3ksIGlkLCByZXF1ZXN0LCByZWplY3RBY3Rpb24pO1xuICAgICAgICBzaWduYWwgPT09IG51bGwgfHwgc2lnbmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHJlamVjdEFjdGlvbigpKTtcbiAgICAgICAgY29uc3Qgc2V0dXBUaW1lciA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmIChmYWxsYmFja0h0dHBUaW1lciA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmYWxsYmFja0h0dHBUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCAoMCwgbWV0aG9kc18xLmdldFJlc3BvbnNlKShpZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWxsYmFja0h0dHBUaW1lciA9PT0gLTEpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NBcHByb3ZlKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBzZXR1cFRpbWVyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHByb3ZpZGVyXzEuSGVyZVByb3ZpZGVyU3RhdHVzLkZBSUxFRDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBlIGluc3RhbmNlb2YgRXJyb3IgPyBlIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgcHJvdmlkZXJfMS5IZXJlUHJvdmlkZXJFcnJvcihwYXlsb2FkLCBlcnJvcikpO1xuICAgICAgICAgICAgICAgICAgICAoX2EgPSBkZWxlZ2F0ZS5vbkZhaWxlZCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNhbGwoZGVsZWdhdGUsIHsgdHlwZTogKChfYiA9IHJlcXVlc3Quc2VsZWN0b3IpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50eXBlKSB8fCBcImxvY2FsXCIsIHN0YXR1cywgcGF5bG9hZCB9KTtcbiAgICAgICAgICAgICAgICAgICAgKF9jID0gc3RyYXRlZ3kgPT09IG51bGwgfHwgc3RyYXRlZ3kgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0cmF0ZWd5Lm9uRmFpbGVkKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuY2FsbChzdHJhdGVneSwgeyB0eXBlOiAoKF9kID0gcmVxdWVzdC5zZWxlY3RvcikgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnR5cGUpIHx8IFwibG9jYWxcIiwgc3RhdHVzLCBwYXlsb2FkIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLCAzMDAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgc2V0dXBUaW1lcigpO1xuICAgICAgICAvLyBNb2JpbGUgZmxvdyBkb2Vzbid0IHN1cHBvcnQgY3Jvc3MgdGFicyBzb2NrZXQgYmFja2dyb3VuZCBwcm9jZXNzXG4gICAgICAgIGlmICgoMCwgdXRpbHNfMS5pc01vYmlsZSkoKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7c29ja2V0QXBpfS93cy8ke2lkfWA7XG4gICAgICAgICAgICBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KGVuZHBvaW50KTtcbiAgICAgICAgICAgIHNvY2tldC5vbm1lc3NhZ2UgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEgPT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGUuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NBcHByb3ZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gbm9wZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuZXhwb3J0cy5wcm94eVByb3ZpZGVyID0gcHJveHlQcm92aWRlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/here-provider/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/here-provider/methods.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/here-provider/methods.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.createRequest = exports.deleteRequest = exports.getResponse = exports.getRequest = exports.proxyApi = void 0;\nconst sha1_1 = __importDefault(__webpack_require__(/*! sha1 */ \"(ssr)/./node_modules/sha1/sha1.js\"));\nconst uuid4_1 = __importDefault(__webpack_require__(/*! uuid4 */ \"(ssr)/./node_modules/uuid4/index.mjs\"));\nconst serialize_1 = __webpack_require__(/*! near-api-js/lib/utils/serialize */ \"(ssr)/./node_modules/near-api-js/lib/utils/serialize.js\");\nconst utils_1 = __webpack_require__(/*! ../utils */ \"(ssr)/./node_modules/@here-wallet/core/build/utils.js\");\nexports.proxyApi = \"https://h4n.app\";\nconst getRequest = (id, signal) => __awaiter(void 0, void 0, void 0, function* () {\n    const res = yield fetch(`${exports.proxyApi}/${id}/request`, {\n        signal,\n        headers: { \"content-type\": \"application/json\" },\n        method: \"GET\",\n    });\n    if (res.ok === false) {\n        throw Error(yield res.text());\n    }\n    const { data } = yield res.json();\n    return JSON.parse(Buffer.from((0, serialize_1.base_decode)(data)).toString(\"utf8\"));\n});\nexports.getRequest = getRequest;\nconst getResponse = (id) => __awaiter(void 0, void 0, void 0, function* () {\n    var _a;\n    const res = yield fetch(`${exports.proxyApi}/${id}/response`, {\n        headers: { \"content-type\": \"application/json\" },\n        method: \"GET\",\n    });\n    if (res.ok === false) {\n        throw Error(yield res.text());\n    }\n    const { data } = yield res.json();\n    const result = (_a = JSON.parse(data)) !== null && _a !== void 0 ? _a : {};\n    return Object.assign({ type: \"here\", public_key: \"\", account_id: \"\", payload: \"\", status: -1, path: \"\" }, result);\n});\nexports.getResponse = getResponse;\nconst deleteRequest = (id) => __awaiter(void 0, void 0, void 0, function* () {\n    const res = yield fetch(`${exports.proxyApi}/${id}`, {\n        headers: { \"content-type\": \"application/json\" },\n        method: \"DELETE\",\n    });\n    if (res.ok === false) {\n        throw Error(yield res.text());\n    }\n});\nexports.deleteRequest = deleteRequest;\nconst createRequest = (request, signal) => __awaiter(void 0, void 0, void 0, function* () {\n    const query = (0, serialize_1.base_encode)(JSON.stringify(Object.assign(Object.assign({}, request), { _id: (0, uuid4_1.default)() })));\n    const hashsum = (0, sha1_1.default)(query);\n    const id = Buffer.from(hashsum, \"hex\").toString(\"base64\");\n    const urlsafe = id.replaceAll(\"/\", \"_\").replaceAll(\"-\", \"+\").slice(0, 13);\n    const res = yield fetch(`${exports.proxyApi}/${urlsafe}/request`, {\n        method: \"POST\",\n        signal,\n        body: JSON.stringify({\n            topic_id: (0, utils_1.getDeviceId)(),\n            data: query,\n        }),\n        headers: {\n            \"content-type\": \"application/json\",\n        },\n    });\n    if (res.ok === false) {\n        throw Error(yield res.text());\n    }\n    return urlsafe;\n});\nexports.createRequest = createRequest;\n//# sourceMappingURL=methods.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvaGVyZS1wcm92aWRlci9tZXRob2RzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHFCQUFxQixHQUFHLHFCQUFxQixHQUFHLG1CQUFtQixHQUFHLGtCQUFrQixHQUFHLGdCQUFnQjtBQUMzRywrQkFBK0IsbUJBQU8sQ0FBQywrQ0FBTTtBQUM3QyxnQ0FBZ0MsbUJBQU8sQ0FBQyxtREFBTztBQUMvQyxvQkFBb0IsbUJBQU8sQ0FBQyxnR0FBaUM7QUFDN0QsZ0JBQWdCLG1CQUFPLENBQUMsdUVBQVU7QUFDbEMsZ0JBQWdCO0FBQ2hCO0FBQ0EsK0JBQStCLGlCQUFpQixHQUFHLEdBQUc7QUFDdEQ7QUFDQSxtQkFBbUIsb0NBQW9DO0FBQ3ZEO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFlBQVksT0FBTztBQUNuQjtBQUNBLENBQUM7QUFDRCxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLCtCQUErQixpQkFBaUIsR0FBRyxHQUFHO0FBQ3RELG1CQUFtQixvQ0FBb0M7QUFDdkQ7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsWUFBWSxPQUFPO0FBQ25CO0FBQ0EsMkJBQTJCLGlGQUFpRjtBQUM1RyxDQUFDO0FBQ0QsbUJBQW1CO0FBQ25CO0FBQ0EsK0JBQStCLGlCQUFpQixHQUFHLEdBQUc7QUFDdEQsbUJBQW1CLG9DQUFvQztBQUN2RDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QscUJBQXFCO0FBQ3JCO0FBQ0EsNEZBQTRGLGNBQWMsNkJBQTZCO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixpQkFBaUIsR0FBRyxRQUFRO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QscUJBQXFCO0FBQ3JCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVsbG8tbmVhci8uL25vZGVfbW9kdWxlcy9AaGVyZS13YWxsZXQvY29yZS9idWlsZC9oZXJlLXByb3ZpZGVyL21ldGhvZHMuanM/NzdhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5jcmVhdGVSZXF1ZXN0ID0gZXhwb3J0cy5kZWxldGVSZXF1ZXN0ID0gZXhwb3J0cy5nZXRSZXNwb25zZSA9IGV4cG9ydHMuZ2V0UmVxdWVzdCA9IGV4cG9ydHMucHJveHlBcGkgPSB2b2lkIDA7XG5jb25zdCBzaGExXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcInNoYTFcIikpO1xuY29uc3QgdXVpZDRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwidXVpZDRcIikpO1xuY29uc3Qgc2VyaWFsaXplXzEgPSByZXF1aXJlKFwibmVhci1hcGktanMvbGliL3V0aWxzL3NlcmlhbGl6ZVwiKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwiLi4vdXRpbHNcIik7XG5leHBvcnRzLnByb3h5QXBpID0gXCJodHRwczovL2g0bi5hcHBcIjtcbmNvbnN0IGdldFJlcXVlc3QgPSAoaWQsIHNpZ25hbCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgcmVzID0geWllbGQgZmV0Y2goYCR7ZXhwb3J0cy5wcm94eUFwaX0vJHtpZH0vcmVxdWVzdGAsIHtcbiAgICAgICAgc2lnbmFsLFxuICAgICAgICBoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICB9KTtcbiAgICBpZiAocmVzLm9rID09PSBmYWxzZSkge1xuICAgICAgICB0aHJvdyBFcnJvcih5aWVsZCByZXMudGV4dCgpKTtcbiAgICB9XG4gICAgY29uc3QgeyBkYXRhIH0gPSB5aWVsZCByZXMuanNvbigpO1xuICAgIHJldHVybiBKU09OLnBhcnNlKEJ1ZmZlci5mcm9tKCgwLCBzZXJpYWxpemVfMS5iYXNlX2RlY29kZSkoZGF0YSkpLnRvU3RyaW5nKFwidXRmOFwiKSk7XG59KTtcbmV4cG9ydHMuZ2V0UmVxdWVzdCA9IGdldFJlcXVlc3Q7XG5jb25zdCBnZXRSZXNwb25zZSA9IChpZCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHJlcyA9IHlpZWxkIGZldGNoKGAke2V4cG9ydHMucHJveHlBcGl9LyR7aWR9L3Jlc3BvbnNlYCwge1xuICAgICAgICBoZWFkZXJzOiB7IFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICB9KTtcbiAgICBpZiAocmVzLm9rID09PSBmYWxzZSkge1xuICAgICAgICB0aHJvdyBFcnJvcih5aWVsZCByZXMudGV4dCgpKTtcbiAgICB9XG4gICAgY29uc3QgeyBkYXRhIH0gPSB5aWVsZCByZXMuanNvbigpO1xuICAgIGNvbnN0IHJlc3VsdCA9IChfYSA9IEpTT04ucGFyc2UoZGF0YSkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHsgdHlwZTogXCJoZXJlXCIsIHB1YmxpY19rZXk6IFwiXCIsIGFjY291bnRfaWQ6IFwiXCIsIHBheWxvYWQ6IFwiXCIsIHN0YXR1czogLTEsIHBhdGg6IFwiXCIgfSwgcmVzdWx0KTtcbn0pO1xuZXhwb3J0cy5nZXRSZXNwb25zZSA9IGdldFJlc3BvbnNlO1xuY29uc3QgZGVsZXRlUmVxdWVzdCA9IChpZCkgPT4gX19hd2FpdGVyKHZvaWQgMCwgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgY29uc3QgcmVzID0geWllbGQgZmV0Y2goYCR7ZXhwb3J0cy5wcm94eUFwaX0vJHtpZH1gLCB7XG4gICAgICAgIGhlYWRlcnM6IHsgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgIH0pO1xuICAgIGlmIChyZXMub2sgPT09IGZhbHNlKSB7XG4gICAgICAgIHRocm93IEVycm9yKHlpZWxkIHJlcy50ZXh0KCkpO1xuICAgIH1cbn0pO1xuZXhwb3J0cy5kZWxldGVSZXF1ZXN0ID0gZGVsZXRlUmVxdWVzdDtcbmNvbnN0IGNyZWF0ZVJlcXVlc3QgPSAocmVxdWVzdCwgc2lnbmFsKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCBxdWVyeSA9ICgwLCBzZXJpYWxpemVfMS5iYXNlX2VuY29kZSkoSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyBfaWQ6ICgwLCB1dWlkNF8xLmRlZmF1bHQpKCkgfSkpKTtcbiAgICBjb25zdCBoYXNoc3VtID0gKDAsIHNoYTFfMS5kZWZhdWx0KShxdWVyeSk7XG4gICAgY29uc3QgaWQgPSBCdWZmZXIuZnJvbShoYXNoc3VtLCBcImhleFwiKS50b1N0cmluZyhcImJhc2U2NFwiKTtcbiAgICBjb25zdCB1cmxzYWZlID0gaWQucmVwbGFjZUFsbChcIi9cIiwgXCJfXCIpLnJlcGxhY2VBbGwoXCItXCIsIFwiK1wiKS5zbGljZSgwLCAxMyk7XG4gICAgY29uc3QgcmVzID0geWllbGQgZmV0Y2goYCR7ZXhwb3J0cy5wcm94eUFwaX0vJHt1cmxzYWZlfS9yZXF1ZXN0YCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBzaWduYWwsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHRvcGljX2lkOiAoMCwgdXRpbHNfMS5nZXREZXZpY2VJZCkoKSxcbiAgICAgICAgICAgIGRhdGE6IHF1ZXJ5LFxuICAgICAgICB9KSxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgfSk7XG4gICAgaWYgKHJlcy5vayA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoeWllbGQgcmVzLnRleHQoKSk7XG4gICAgfVxuICAgIHJldHVybiB1cmxzYWZlO1xufSk7XG5leHBvcnRzLmNyZWF0ZVJlcXVlc3QgPSBjcmVhdGVSZXF1ZXN0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWV0aG9kcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/here-provider/methods.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/index.js":
/*!*******************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/index.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.HereWallet = void 0;\nvar wallet_1 = __webpack_require__(/*! ./wallet */ \"(ssr)/./node_modules/@here-wallet/core/build/wallet.js\");\nObject.defineProperty(exports, \"HereWallet\", ({ enumerable: true, get: function () { return wallet_1.HereWallet; } }));\n__exportStar(__webpack_require__(/*! ./actions */ \"(ssr)/./node_modules/@here-wallet/core/build/actions/index.js\"), exports);\n__exportStar(__webpack_require__(/*! ./HereKeyStore */ \"(ssr)/./node_modules/@here-wallet/core/build/HereKeyStore.js\"), exports);\n__exportStar(__webpack_require__(/*! ./JSONStorage */ \"(ssr)/./node_modules/@here-wallet/core/build/JSONStorage.js\"), exports);\n__exportStar(__webpack_require__(/*! ./actions/types */ \"(ssr)/./node_modules/@here-wallet/core/build/actions/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./WidgetStrategy */ \"(ssr)/./node_modules/@here-wallet/core/build/WidgetStrategy.js\"), exports);\n__exportStar(__webpack_require__(/*! ./WindowStrategy */ \"(ssr)/./node_modules/@here-wallet/core/build/WindowStrategy.js\"), exports);\n__exportStar(__webpack_require__(/*! ./provider */ \"(ssr)/./node_modules/@here-wallet/core/build/provider.js\"), exports);\n__exportStar(__webpack_require__(/*! ./types */ \"(ssr)/./node_modules/@here-wallet/core/build/types.js\"), exports);\n__exportStar(__webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/@here-wallet/core/build/utils.js\"), exports);\n__exportStar(__webpack_require__(/*! ./here-provider */ \"(ssr)/./node_modules/@here-wallet/core/build/here-provider/index.js\"), exports);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0EsbUNBQW1DLG9DQUFvQyxnQkFBZ0I7QUFDdkYsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELGtCQUFrQjtBQUNsQixlQUFlLG1CQUFPLENBQUMsd0VBQVU7QUFDakMsOENBQTZDLEVBQUUscUNBQXFDLCtCQUErQixFQUFDO0FBQ3BILGFBQWEsbUJBQU8sQ0FBQyxnRkFBVztBQUNoQyxhQUFhLG1CQUFPLENBQUMsb0ZBQWdCO0FBQ3JDLGFBQWEsbUJBQU8sQ0FBQyxrRkFBZTtBQUNwQyxhQUFhLG1CQUFPLENBQUMsc0ZBQWlCO0FBQ3RDLGFBQWEsbUJBQU8sQ0FBQyx3RkFBa0I7QUFDdkMsYUFBYSxtQkFBTyxDQUFDLHdGQUFrQjtBQUN2QyxhQUFhLG1CQUFPLENBQUMsNEVBQVk7QUFDakMsYUFBYSxtQkFBTyxDQUFDLHNFQUFTO0FBQzlCLGFBQWEsbUJBQU8sQ0FBQyxzRUFBUztBQUM5QixhQUFhLG1CQUFPLENBQUMsNEZBQWlCO0FBQ3RDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVsbG8tbmVhci8uL25vZGVfbW9kdWxlcy9AaGVyZS13YWxsZXQvY29yZS9idWlsZC9pbmRleC5qcz8xNTVjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX2V4cG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9fZXhwb3J0U3RhcikgfHwgZnVuY3Rpb24obSwgZXhwb3J0cykge1xuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXhwb3J0cywgcCkpIF9fY3JlYXRlQmluZGluZyhleHBvcnRzLCBtLCBwKTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLkhlcmVXYWxsZXQgPSB2b2lkIDA7XG52YXIgd2FsbGV0XzEgPSByZXF1aXJlKFwiLi93YWxsZXRcIik7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJIZXJlV2FsbGV0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB3YWxsZXRfMS5IZXJlV2FsbGV0OyB9IH0pO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2FjdGlvbnNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL0hlcmVLZXlTdG9yZVwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vSlNPTlN0b3JhZ2VcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL2FjdGlvbnMvdHlwZXNcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL1dpZGdldFN0cmF0ZWd5XCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi9XaW5kb3dTdHJhdGVneVwiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vcHJvdmlkZXJcIiksIGV4cG9ydHMpO1xuX19leHBvcnRTdGFyKHJlcXVpcmUoXCIuL3R5cGVzXCIpLCBleHBvcnRzKTtcbl9fZXhwb3J0U3RhcihyZXF1aXJlKFwiLi91dGlsc1wiKSwgZXhwb3J0cyk7XG5fX2V4cG9ydFN0YXIocmVxdWlyZShcIi4vaGVyZS1wcm92aWRlclwiKSwgZXhwb3J0cyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/nep0314.js":
/*!*********************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/nep0314.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.verifySignature = exports.authPayloadSchema = exports.AuthPayload = void 0;\nconst borsh = __importStar(__webpack_require__(/*! borsh */ \"(ssr)/./node_modules/borsh/lib/index.js\"));\nconst js_sha256_1 = __importDefault(__webpack_require__(/*! js-sha256 */ \"(ssr)/./node_modules/js-sha256/src/sha256.js\"));\nconst utils_1 = __webpack_require__(/*! near-api-js/lib/utils */ \"(ssr)/./node_modules/near-api-js/lib/utils/index.js\");\nclass AuthPayload {\n    constructor({ message, nonce, recipient, callbackUrl }) {\n        this.tag = 2147484061;\n        this.message = message;\n        this.nonce = nonce;\n        this.recipient = recipient;\n        if (callbackUrl) {\n            this.callbackUrl = callbackUrl;\n        }\n    }\n}\nexports.AuthPayload = AuthPayload;\nexports.authPayloadSchema = {\n    struct: {\n        tag: \"u32\",\n        message: \"string\",\n        nonce: { array: { type: \"u8\", len: 32 } },\n        recipient: \"string\",\n        callbackUrl: { option: \"string\" },\n    },\n};\nfunction verifySignature(request, result) {\n    // Reconstruct the payload that was **actually signed**\n    const payload = new AuthPayload(request);\n    const borsh_payload = borsh.serialize(exports.authPayloadSchema, payload);\n    const to_sign = Uint8Array.from(js_sha256_1.default.sha256.array(borsh_payload));\n    // Reconstruct the signature from the parameter given in the URL\n    let real_signature = new Uint8Array(Buffer.from(result.signature, \"base64\"));\n    // Use the public Key to verify that the private-counterpart signed the message\n    const myPK = utils_1.PublicKey.from(result.publicKey);\n    return myPK.verify(to_sign, real_signature);\n}\nexports.verifySignature = verifySignature;\n//# sourceMappingURL=nep0314.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvbmVwMDMxNC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0E7QUFDQSxtQ0FBbUMsb0NBQW9DLGdCQUFnQjtBQUN2RixDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDBDQUEwQyw0QkFBNEI7QUFDdEUsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsdUJBQXVCLEdBQUcseUJBQXlCLEdBQUcsbUJBQW1CO0FBQ3pFLDJCQUEyQixtQkFBTyxDQUFDLHNEQUFPO0FBQzFDLG9DQUFvQyxtQkFBTyxDQUFDLCtEQUFXO0FBQ3ZELGdCQUFnQixtQkFBTyxDQUFDLGtGQUF1QjtBQUMvQztBQUNBLGtCQUFrQix3Q0FBd0M7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsU0FBUyx1QkFBdUI7QUFDakQ7QUFDQSx1QkFBdUIsa0JBQWtCO0FBQ3pDLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWxsby1uZWFyLy4vbm9kZV9tb2R1bGVzL0BoZXJlLXdhbGxldC9jb3JlL2J1aWxkL25lcDAzMTQuanM/NTU3MSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy52ZXJpZnlTaWduYXR1cmUgPSBleHBvcnRzLmF1dGhQYXlsb2FkU2NoZW1hID0gZXhwb3J0cy5BdXRoUGF5bG9hZCA9IHZvaWQgMDtcbmNvbnN0IGJvcnNoID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJib3JzaFwiKSk7XG5jb25zdCBqc19zaGEyNTZfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwianMtc2hhMjU2XCIpKTtcbmNvbnN0IHV0aWxzXzEgPSByZXF1aXJlKFwibmVhci1hcGktanMvbGliL3V0aWxzXCIpO1xuY2xhc3MgQXV0aFBheWxvYWQge1xuICAgIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSwgbm9uY2UsIHJlY2lwaWVudCwgY2FsbGJhY2tVcmwgfSkge1xuICAgICAgICB0aGlzLnRhZyA9IDIxNDc0ODQwNjE7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIHRoaXMubm9uY2UgPSBub25jZTtcbiAgICAgICAgdGhpcy5yZWNpcGllbnQgPSByZWNpcGllbnQ7XG4gICAgICAgIGlmIChjYWxsYmFja1VybCkge1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFja1VybCA9IGNhbGxiYWNrVXJsO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5BdXRoUGF5bG9hZCA9IEF1dGhQYXlsb2FkO1xuZXhwb3J0cy5hdXRoUGF5bG9hZFNjaGVtYSA9IHtcbiAgICBzdHJ1Y3Q6IHtcbiAgICAgICAgdGFnOiBcInUzMlwiLFxuICAgICAgICBtZXNzYWdlOiBcInN0cmluZ1wiLFxuICAgICAgICBub25jZTogeyBhcnJheTogeyB0eXBlOiBcInU4XCIsIGxlbjogMzIgfSB9LFxuICAgICAgICByZWNpcGllbnQ6IFwic3RyaW5nXCIsXG4gICAgICAgIGNhbGxiYWNrVXJsOiB7IG9wdGlvbjogXCJzdHJpbmdcIiB9LFxuICAgIH0sXG59O1xuZnVuY3Rpb24gdmVyaWZ5U2lnbmF0dXJlKHJlcXVlc3QsIHJlc3VsdCkge1xuICAgIC8vIFJlY29uc3RydWN0IHRoZSBwYXlsb2FkIHRoYXQgd2FzICoqYWN0dWFsbHkgc2lnbmVkKipcbiAgICBjb25zdCBwYXlsb2FkID0gbmV3IEF1dGhQYXlsb2FkKHJlcXVlc3QpO1xuICAgIGNvbnN0IGJvcnNoX3BheWxvYWQgPSBib3JzaC5zZXJpYWxpemUoZXhwb3J0cy5hdXRoUGF5bG9hZFNjaGVtYSwgcGF5bG9hZCk7XG4gICAgY29uc3QgdG9fc2lnbiA9IFVpbnQ4QXJyYXkuZnJvbShqc19zaGEyNTZfMS5kZWZhdWx0LnNoYTI1Ni5hcnJheShib3JzaF9wYXlsb2FkKSk7XG4gICAgLy8gUmVjb25zdHJ1Y3QgdGhlIHNpZ25hdHVyZSBmcm9tIHRoZSBwYXJhbWV0ZXIgZ2l2ZW4gaW4gdGhlIFVSTFxuICAgIGxldCByZWFsX3NpZ25hdHVyZSA9IG5ldyBVaW50OEFycmF5KEJ1ZmZlci5mcm9tKHJlc3VsdC5zaWduYXR1cmUsIFwiYmFzZTY0XCIpKTtcbiAgICAvLyBVc2UgdGhlIHB1YmxpYyBLZXkgdG8gdmVyaWZ5IHRoYXQgdGhlIHByaXZhdGUtY291bnRlcnBhcnQgc2lnbmVkIHRoZSBtZXNzYWdlXG4gICAgY29uc3QgbXlQSyA9IHV0aWxzXzEuUHVibGljS2V5LmZyb20ocmVzdWx0LnB1YmxpY0tleSk7XG4gICAgcmV0dXJuIG15UEsudmVyaWZ5KHRvX3NpZ24sIHJlYWxfc2lnbmF0dXJlKTtcbn1cbmV4cG9ydHMudmVyaWZ5U2lnbmF0dXJlID0gdmVyaWZ5U2lnbmF0dXJlO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bmVwMDMxNC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/nep0314.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/provider.js":
/*!**********************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/provider.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.HereProviderError = exports.HereProviderStatus = void 0;\nvar HereProviderStatus;\n(function (HereProviderStatus) {\n    HereProviderStatus[HereProviderStatus[\"APPROVING\"] = 1] = \"APPROVING\";\n    HereProviderStatus[HereProviderStatus[\"FAILED\"] = 2] = \"FAILED\";\n    HereProviderStatus[HereProviderStatus[\"SUCCESS\"] = 3] = \"SUCCESS\";\n})(HereProviderStatus = exports.HereProviderStatus || (exports.HereProviderStatus = {}));\nclass HereProviderError extends Error {\n    constructor(payload, parentError) {\n        super(payload !== null && payload !== void 0 ? payload : parentError === null || parentError === void 0 ? void 0 : parentError.message);\n        this.payload = payload;\n        this.parentError = parentError;\n    }\n}\nexports.HereProviderError = HereProviderError;\n//# sourceMappingURL=provider.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvcHJvdmlkZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QseUJBQXlCLEdBQUcsMEJBQTBCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNEQUFzRCwwQkFBMEIsS0FBSztBQUN0RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QiIsInNvdXJjZXMiOlsid2VicGFjazovL2hlbGxvLW5lYXIvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvcHJvdmlkZXIuanM/NjVmYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuSGVyZVByb3ZpZGVyRXJyb3IgPSBleHBvcnRzLkhlcmVQcm92aWRlclN0YXR1cyA9IHZvaWQgMDtcbnZhciBIZXJlUHJvdmlkZXJTdGF0dXM7XG4oZnVuY3Rpb24gKEhlcmVQcm92aWRlclN0YXR1cykge1xuICAgIEhlcmVQcm92aWRlclN0YXR1c1tIZXJlUHJvdmlkZXJTdGF0dXNbXCJBUFBST1ZJTkdcIl0gPSAxXSA9IFwiQVBQUk9WSU5HXCI7XG4gICAgSGVyZVByb3ZpZGVyU3RhdHVzW0hlcmVQcm92aWRlclN0YXR1c1tcIkZBSUxFRFwiXSA9IDJdID0gXCJGQUlMRURcIjtcbiAgICBIZXJlUHJvdmlkZXJTdGF0dXNbSGVyZVByb3ZpZGVyU3RhdHVzW1wiU1VDQ0VTU1wiXSA9IDNdID0gXCJTVUNDRVNTXCI7XG59KShIZXJlUHJvdmlkZXJTdGF0dXMgPSBleHBvcnRzLkhlcmVQcm92aWRlclN0YXR1cyB8fCAoZXhwb3J0cy5IZXJlUHJvdmlkZXJTdGF0dXMgPSB7fSkpO1xuY2xhc3MgSGVyZVByb3ZpZGVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IocGF5bG9hZCwgcGFyZW50RXJyb3IpIHtcbiAgICAgICAgc3VwZXIocGF5bG9hZCAhPT0gbnVsbCAmJiBwYXlsb2FkICE9PSB2b2lkIDAgPyBwYXlsb2FkIDogcGFyZW50RXJyb3IgPT09IG51bGwgfHwgcGFyZW50RXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHBhcmVudEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnBheWxvYWQgPSBwYXlsb2FkO1xuICAgICAgICB0aGlzLnBhcmVudEVycm9yID0gcGFyZW50RXJyb3I7XG4gICAgfVxufVxuZXhwb3J0cy5IZXJlUHJvdmlkZXJFcnJvciA9IEhlcmVQcm92aWRlckVycm9yO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cHJvdmlkZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/provider.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/types.js":
/*!*******************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/types.js ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n//# sourceMappingURL=types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvdHlwZXMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWxsby1uZWFyLy4vbm9kZV9tb2R1bGVzL0BoZXJlLXdhbGxldC9jb3JlL2J1aWxkL3R5cGVzLmpzPzJiZjgiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD10eXBlcy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/types.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/utils.js":
/*!*******************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/utils.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.isValidAccessKey = exports.internalThrow = exports.getPublicKeys = exports.serializeActions = exports.isMobile = exports.getDeviceId = void 0;\nconst uuid4_1 = __importDefault(__webpack_require__(/*! uuid4 */ \"(ssr)/./node_modules/uuid4/index.mjs\"));\nconst provider_1 = __webpack_require__(/*! ./provider */ \"(ssr)/./node_modules/@here-wallet/core/build/provider.js\");\nconst getDeviceId = () => {\n    const topicId = window.localStorage.getItem(\"herewallet-topic\") || (0, uuid4_1.default)();\n    window.localStorage.setItem(\"herewallet-topic\", topicId);\n    return topicId;\n};\nexports.getDeviceId = getDeviceId;\nconst isMobile = () => {\n    return window.matchMedia(\"(any-pointer:coarse)\").matches;\n};\nexports.isMobile = isMobile;\nconst serializeActions = (actions) => {\n    return actions.map((act) => {\n        if (act.type !== \"FunctionCall\")\n            return act;\n        let { args, deposit, gas, methodName } = act.params;\n        if (ArrayBuffer.isView(args)) {\n            args = Buffer.from(args.buffer, args.byteOffset, args.byteLength);\n        }\n        if (args instanceof Buffer) {\n            args = args.toString(\"base64\");\n        }\n        return {\n            type: act.type,\n            params: { args, deposit, gas, methodName },\n        };\n    });\n};\nexports.serializeActions = serializeActions;\nconst getPublicKeys = (rpc, accountId) => __awaiter(void 0, void 0, void 0, function* () {\n    const res = yield fetch(rpc, {\n        method: \"POST\",\n        body: JSON.stringify({\n            jsonrpc: \"2.0\",\n            id: \"dontcare\",\n            method: \"query\",\n            params: {\n                request_type: \"view_access_key_list\",\n                finality: \"final\",\n                account_id: accountId,\n            },\n        }),\n        headers: {\n            \"content-type\": \"application/json\",\n        },\n    });\n    if (res.ok === false) {\n        return [];\n    }\n    const data = yield res.json();\n    return data.result.keys;\n});\nexports.getPublicKeys = getPublicKeys;\nconst internalThrow = (error, delegate) => {\n    var _a, _b, _c, _d, _e;\n    if (error instanceof provider_1.HereProviderError) {\n        throw error;\n    }\n    const result = {\n        payload: error instanceof Error ? error.message : \"UNKNOWN\",\n        status: provider_1.HereProviderStatus.FAILED,\n        type: ((_a = delegate.selector) === null || _a === void 0 ? void 0 : _a.type) || \"local\",\n        account_id: ((_b = delegate.selector) === null || _b === void 0 ? void 0 : _b.id) || \"\",\n    };\n    (_c = delegate.onFailed) === null || _c === void 0 ? void 0 : _c.call(delegate, result);\n    (_e = (_d = delegate === null || delegate === void 0 ? void 0 : delegate.strategy) === null || _d === void 0 ? void 0 : _d.onFailed) === null || _e === void 0 ? void 0 : _e.call(_d, result);\n    throw error;\n};\nexports.internalThrow = internalThrow;\nconst isValidAccessKey = (accountId, accessKey, call) => {\n    const { permission } = accessKey.access_key;\n    if (permission === \"FullAccess\") {\n        return true;\n    }\n    if (permission.FunctionCall) {\n        const { receiver_id: allowedReceiverId, method_names: allowedMethods } = permission.FunctionCall;\n        /********************************\n        Accept multisig access keys and let wallets attempt to signAndSendTransaction\n        If an access key has itself as receiverId and method permission add_request_and_confirm, then it is being used in a wallet with multisig contract: https://github.com/near/core-contracts/blob/671c05f09abecabe7a7e58efe942550a35fc3292/multisig/src/lib.rs#L149-L153\n        ********************************/\n        if (allowedReceiverId === accountId && allowedMethods.includes(\"add_request_and_confirm\")) {\n            return true;\n        }\n        if (allowedReceiverId === call.receiverId) {\n            if (call.actions.length !== 1)\n                return false;\n            return call.actions.every((action) => {\n                if (action.type !== \"FunctionCall\")\n                    return false;\n                return ((!action.params.deposit || action.params.deposit.toString() === \"0\") &&\n                    (allowedMethods.length === 0 || allowedMethods.includes(action.params.methodName)));\n            });\n        }\n    }\n    return false;\n};\nexports.isValidAccessKey = isValidAccessKey;\n//# sourceMappingURL=utils.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvdXRpbHMuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBLDRCQUE0QiwrREFBK0QsaUJBQWlCO0FBQzVHO0FBQ0Esb0NBQW9DLE1BQU0sK0JBQStCLFlBQVk7QUFDckYsbUNBQW1DLE1BQU0sbUNBQW1DLFlBQVk7QUFDeEYsZ0NBQWdDO0FBQ2hDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsd0JBQXdCLEdBQUcscUJBQXFCLEdBQUcscUJBQXFCLEdBQUcsd0JBQXdCLEdBQUcsZ0JBQWdCLEdBQUcsbUJBQW1CO0FBQzVJLGdDQUFnQyxtQkFBTyxDQUFDLG1EQUFPO0FBQy9DLG1CQUFtQixtQkFBTyxDQUFDLDRFQUFZO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpQ0FBaUM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixnQ0FBZ0M7QUFDdEQ7QUFDQSxLQUFLO0FBQ0w7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLCtEQUErRDtBQUMvRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9oZWxsby1uZWFyLy4vbm9kZV9tb2R1bGVzL0BoZXJlLXdhbGxldC9jb3JlL2J1aWxkL3V0aWxzLmpzP2RiZTkiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmV4cG9ydHMuaXNWYWxpZEFjY2Vzc0tleSA9IGV4cG9ydHMuaW50ZXJuYWxUaHJvdyA9IGV4cG9ydHMuZ2V0UHVibGljS2V5cyA9IGV4cG9ydHMuc2VyaWFsaXplQWN0aW9ucyA9IGV4cG9ydHMuaXNNb2JpbGUgPSBleHBvcnRzLmdldERldmljZUlkID0gdm9pZCAwO1xuY29uc3QgdXVpZDRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwidXVpZDRcIikpO1xuY29uc3QgcHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL3Byb3ZpZGVyXCIpO1xuY29uc3QgZ2V0RGV2aWNlSWQgPSAoKSA9PiB7XG4gICAgY29uc3QgdG9waWNJZCA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImhlcmV3YWxsZXQtdG9waWNcIikgfHwgKDAsIHV1aWQ0XzEuZGVmYXVsdCkoKTtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJoZXJld2FsbGV0LXRvcGljXCIsIHRvcGljSWQpO1xuICAgIHJldHVybiB0b3BpY0lkO1xufTtcbmV4cG9ydHMuZ2V0RGV2aWNlSWQgPSBnZXREZXZpY2VJZDtcbmNvbnN0IGlzTW9iaWxlID0gKCkgPT4ge1xuICAgIHJldHVybiB3aW5kb3cubWF0Y2hNZWRpYShcIihhbnktcG9pbnRlcjpjb2Fyc2UpXCIpLm1hdGNoZXM7XG59O1xuZXhwb3J0cy5pc01vYmlsZSA9IGlzTW9iaWxlO1xuY29uc3Qgc2VyaWFsaXplQWN0aW9ucyA9IChhY3Rpb25zKSA9PiB7XG4gICAgcmV0dXJuIGFjdGlvbnMubWFwKChhY3QpID0+IHtcbiAgICAgICAgaWYgKGFjdC50eXBlICE9PSBcIkZ1bmN0aW9uQ2FsbFwiKVxuICAgICAgICAgICAgcmV0dXJuIGFjdDtcbiAgICAgICAgbGV0IHsgYXJncywgZGVwb3NpdCwgZ2FzLCBtZXRob2ROYW1lIH0gPSBhY3QucGFyYW1zO1xuICAgICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGFyZ3MpKSB7XG4gICAgICAgICAgICBhcmdzID0gQnVmZmVyLmZyb20oYXJncy5idWZmZXIsIGFyZ3MuYnl0ZU9mZnNldCwgYXJncy5ieXRlTGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXJncyBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuICAgICAgICAgICAgYXJncyA9IGFyZ3MudG9TdHJpbmcoXCJiYXNlNjRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IGFjdC50eXBlLFxuICAgICAgICAgICAgcGFyYW1zOiB7IGFyZ3MsIGRlcG9zaXQsIGdhcywgbWV0aG9kTmFtZSB9LFxuICAgICAgICB9O1xuICAgIH0pO1xufTtcbmV4cG9ydHMuc2VyaWFsaXplQWN0aW9ucyA9IHNlcmlhbGl6ZUFjdGlvbnM7XG5jb25zdCBnZXRQdWJsaWNLZXlzID0gKHJwYywgYWNjb3VudElkKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCByZXMgPSB5aWVsZCBmZXRjaChycGMsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAganNvbnJwYzogXCIyLjBcIixcbiAgICAgICAgICAgIGlkOiBcImRvbnRjYXJlXCIsXG4gICAgICAgICAgICBtZXRob2Q6IFwicXVlcnlcIixcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RfdHlwZTogXCJ2aWV3X2FjY2Vzc19rZXlfbGlzdFwiLFxuICAgICAgICAgICAgICAgIGZpbmFsaXR5OiBcImZpbmFsXCIsXG4gICAgICAgICAgICAgICAgYWNjb3VudF9pZDogYWNjb3VudElkLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSksXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIGlmIChyZXMub2sgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHlpZWxkIHJlcy5qc29uKCk7XG4gICAgcmV0dXJuIGRhdGEucmVzdWx0LmtleXM7XG59KTtcbmV4cG9ydHMuZ2V0UHVibGljS2V5cyA9IGdldFB1YmxpY0tleXM7XG5jb25zdCBpbnRlcm5hbFRocm93ID0gKGVycm9yLCBkZWxlZ2F0ZSkgPT4ge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2U7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgcHJvdmlkZXJfMS5IZXJlUHJvdmlkZXJFcnJvcikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICBwYXlsb2FkOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVU5LTk9XTlwiLFxuICAgICAgICBzdGF0dXM6IHByb3ZpZGVyXzEuSGVyZVByb3ZpZGVyU3RhdHVzLkZBSUxFRCxcbiAgICAgICAgdHlwZTogKChfYSA9IGRlbGVnYXRlLnNlbGVjdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudHlwZSkgfHwgXCJsb2NhbFwiLFxuICAgICAgICBhY2NvdW50X2lkOiAoKF9iID0gZGVsZWdhdGUuc2VsZWN0b3IpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5pZCkgfHwgXCJcIixcbiAgICB9O1xuICAgIChfYyA9IGRlbGVnYXRlLm9uRmFpbGVkKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuY2FsbChkZWxlZ2F0ZSwgcmVzdWx0KTtcbiAgICAoX2UgPSAoX2QgPSBkZWxlZ2F0ZSA9PT0gbnVsbCB8fCBkZWxlZ2F0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVsZWdhdGUuc3RyYXRlZ3kpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5vbkZhaWxlZCkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLmNhbGwoX2QsIHJlc3VsdCk7XG4gICAgdGhyb3cgZXJyb3I7XG59O1xuZXhwb3J0cy5pbnRlcm5hbFRocm93ID0gaW50ZXJuYWxUaHJvdztcbmNvbnN0IGlzVmFsaWRBY2Nlc3NLZXkgPSAoYWNjb3VudElkLCBhY2Nlc3NLZXksIGNhbGwpID0+IHtcbiAgICBjb25zdCB7IHBlcm1pc3Npb24gfSA9IGFjY2Vzc0tleS5hY2Nlc3Nfa2V5O1xuICAgIGlmIChwZXJtaXNzaW9uID09PSBcIkZ1bGxBY2Nlc3NcIikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHBlcm1pc3Npb24uRnVuY3Rpb25DYWxsKSB7XG4gICAgICAgIGNvbnN0IHsgcmVjZWl2ZXJfaWQ6IGFsbG93ZWRSZWNlaXZlcklkLCBtZXRob2RfbmFtZXM6IGFsbG93ZWRNZXRob2RzIH0gPSBwZXJtaXNzaW9uLkZ1bmN0aW9uQ2FsbDtcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICAgIEFjY2VwdCBtdWx0aXNpZyBhY2Nlc3Mga2V5cyBhbmQgbGV0IHdhbGxldHMgYXR0ZW1wdCB0byBzaWduQW5kU2VuZFRyYW5zYWN0aW9uXG4gICAgICAgIElmIGFuIGFjY2VzcyBrZXkgaGFzIGl0c2VsZiBhcyByZWNlaXZlcklkIGFuZCBtZXRob2QgcGVybWlzc2lvbiBhZGRfcmVxdWVzdF9hbmRfY29uZmlybSwgdGhlbiBpdCBpcyBiZWluZyB1c2VkIGluIGEgd2FsbGV0IHdpdGggbXVsdGlzaWcgY29udHJhY3Q6IGh0dHBzOi8vZ2l0aHViLmNvbS9uZWFyL2NvcmUtY29udHJhY3RzL2Jsb2IvNjcxYzA1ZjA5YWJlY2FiZTdhN2U1OGVmZTk0MjU1MGEzNWZjMzI5Mi9tdWx0aXNpZy9zcmMvbGliLnJzI0wxNDktTDE1M1xuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICAgICAgaWYgKGFsbG93ZWRSZWNlaXZlcklkID09PSBhY2NvdW50SWQgJiYgYWxsb3dlZE1ldGhvZHMuaW5jbHVkZXMoXCJhZGRfcmVxdWVzdF9hbmRfY29uZmlybVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFsbG93ZWRSZWNlaXZlcklkID09PSBjYWxsLnJlY2VpdmVySWQpIHtcbiAgICAgICAgICAgIGlmIChjYWxsLmFjdGlvbnMubGVuZ3RoICE9PSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsLmFjdGlvbnMuZXZlcnkoKGFjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24udHlwZSAhPT0gXCJGdW5jdGlvbkNhbGxcIilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiAoKCFhY3Rpb24ucGFyYW1zLmRlcG9zaXQgfHwgYWN0aW9uLnBhcmFtcy5kZXBvc2l0LnRvU3RyaW5nKCkgPT09IFwiMFwiKSAmJlxuICAgICAgICAgICAgICAgICAgICAoYWxsb3dlZE1ldGhvZHMubGVuZ3RoID09PSAwIHx8IGFsbG93ZWRNZXRob2RzLmluY2x1ZGVzKGFjdGlvbi5wYXJhbXMubWV0aG9kTmFtZSkpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn07XG5leHBvcnRzLmlzVmFsaWRBY2Nlc3NLZXkgPSBpc1ZhbGlkQWNjZXNzS2V5O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dXRpbHMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/utils.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@here-wallet/core/build/wallet.js":
/*!********************************************************!*\
  !*** ./node_modules/@here-wallet/core/build/wallet.js ***!
  \********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.HereWallet = void 0;\nconst near_api_js_1 = __webpack_require__(/*! near-api-js */ \"(ssr)/./node_modules/near-api-js/lib/index.js\");\nconst providers_1 = __webpack_require__(/*! near-api-js/lib/providers */ \"(ssr)/./node_modules/near-api-js/lib/providers/index.js\");\nconst key_pair_1 = __webpack_require__(/*! near-api-js/lib/utils/key_pair */ \"(ssr)/./node_modules/near-api-js/lib/utils/key_pair.js\");\nconst js_sha256_1 = __webpack_require__(/*! js-sha256 */ \"(ssr)/./node_modules/js-sha256/src/sha256.js\");\nconst crypto_1 = __webpack_require__(/*! crypto */ \"crypto\");\nconst bn_js_1 = __importDefault(__webpack_require__(/*! bn.js */ \"(ssr)/./node_modules/bn.js/lib/bn.js\"));\nconst HereKeyStore_1 = __webpack_require__(/*! ./HereKeyStore */ \"(ssr)/./node_modules/@here-wallet/core/build/HereKeyStore.js\");\nconst provider_1 = __webpack_require__(/*! ./provider */ \"(ssr)/./node_modules/@here-wallet/core/build/provider.js\");\nconst utils_1 = __webpack_require__(/*! ./utils */ \"(ssr)/./node_modules/@here-wallet/core/build/utils.js\");\nconst here_provider_1 = __webpack_require__(/*! ./here-provider */ \"(ssr)/./node_modules/@here-wallet/core/build/here-provider/index.js\");\nconst actions_1 = __webpack_require__(/*! ./actions */ \"(ssr)/./node_modules/@here-wallet/core/build/actions/index.js\");\nconst WidgetStrategy_1 = __webpack_require__(/*! ./WidgetStrategy */ \"(ssr)/./node_modules/@here-wallet/core/build/WidgetStrategy.js\");\nconst nep0314_1 = __webpack_require__(/*! ./nep0314 */ \"(ssr)/./node_modules/@here-wallet/core/build/nep0314.js\");\nclass AccessDenied extends Error {\n}\nclass HereWallet {\n    constructor({ nodeUrl, networkId = \"mainnet\", authStorage = new HereKeyStore_1.HereKeyStore(), defaultStrategy = () => new WidgetStrategy_1.WidgetStrategy(), defaultProvider = here_provider_1.proxyProvider, } = {}) {\n        this.authStorage = authStorage;\n        this.defaultProvider = defaultProvider;\n        this.defaultStrategy = defaultStrategy;\n        const signer = new near_api_js_1.InMemorySigner(this.authStorage);\n        const rpc = new providers_1.JsonRpcProvider({ url: nodeUrl !== null && nodeUrl !== void 0 ? nodeUrl : `https://rpc.${networkId}.near.org` });\n        this.connection = near_api_js_1.Connection.fromConfig({\n            jsvmAccountId: `jsvm.${networkId}`,\n            provider: rpc,\n            networkId,\n            signer,\n        });\n    }\n    get rpc() {\n        return this.connection.provider;\n    }\n    get signer() {\n        return this.connection.signer;\n    }\n    get networkId() {\n        return this.connection.networkId;\n    }\n    account(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const accountId = id !== null && id !== void 0 ? id : (yield this.authStorage.getActiveAccount(this.networkId));\n            if (accountId == null)\n                throw new AccessDenied(\"Wallet not signed in\");\n            return new near_api_js_1.Account(this.connection, accountId);\n        });\n    }\n    isSignedIn() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const id = yield this.authStorage.getActiveAccount(this.networkId);\n            return id != null;\n        });\n    }\n    signOut() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const accountId = yield this.authStorage.getActiveAccount(this.networkId);\n            if (accountId == null)\n                throw new Error(\"Wallet not signed in\");\n            const key = yield this.authStorage.getKey(this.networkId, accountId);\n            if (key != null) {\n                const publicKey = key.getPublicKey().toString();\n                yield this.silentSignAndSendTransaction({\n                    receiverId: accountId,\n                    actions: [{ type: \"DeleteKey\", params: { publicKey } }],\n                }).catch(() => { });\n            }\n            yield this.authStorage.removeKey(this.networkId, accountId);\n        });\n    }\n    getHereBalance(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const account = yield this.account(id);\n            const contractId = this.networkId === \"mainnet\" ? \"here.storage.near\" : \"here.storage.testnet\";\n            const hereCoins = yield account\n                .viewFunction({\n                args: { account_id: account.accountId },\n                methodName: \"ft_balance_of\",\n                contractId,\n            })\n                .catch(() => \"0\");\n            return new bn_js_1.default(hereCoins);\n        });\n    }\n    getAvailableBalance(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const account = yield this.account(id);\n            const result = yield account.getAccountBalance();\n            const hereBalance = yield this.getHereBalance();\n            return new bn_js_1.default(result.available).add(new bn_js_1.default(hereBalance));\n        });\n    }\n    getAccounts() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.authStorage.getAccounts(this.networkId);\n        });\n    }\n    getAccountId() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const accountId = yield this.authStorage.getActiveAccount(this.networkId);\n            if (accountId == null)\n                throw new Error(\"Wallet not signed in\");\n            return accountId;\n        });\n    }\n    switchAccount(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const key = yield this.authStorage.getKey(this.networkId, id);\n            if (key == null)\n                throw new Error(`Account ${id} not signed in`);\n            yield this.authStorage.setActiveAccount(this.networkId, id);\n        });\n    }\n    signIn(_a = {}) {\n        var _b, _c, _d, _e, _f;\n        var { contractId, allowance, methodNames = [], selector } = _a, delegate = __rest(_a, [\"contractId\", \"allowance\", \"methodNames\", \"selector\"]);\n        return __awaiter(this, void 0, void 0, function* () {\n            if (contractId == null) {\n                const { accountId } = yield this.authenticate(delegate);\n                // Generate random keypair\n                yield this.authStorage.setKey(this.networkId, accountId, key_pair_1.KeyPairEd25519.fromRandom());\n                yield this.authStorage.setActiveAccount(this.networkId, accountId);\n                return accountId;\n            }\n            delegate.strategy = (_b = delegate.strategy) !== null && _b !== void 0 ? _b : this.defaultStrategy();\n            delegate.provider = (_c = delegate.provider) !== null && _c !== void 0 ? _c : this.defaultProvider;\n            (_d = delegate.onInitialized) === null || _d === void 0 ? void 0 : _d.call(delegate);\n            (_f = (_e = delegate.strategy) === null || _e === void 0 ? void 0 : _e.onInitialized) === null || _f === void 0 ? void 0 : _f.call(_e);\n            try {\n                const accessKey = near_api_js_1.KeyPair.fromRandom(\"ed25519\");\n                const permission = { receiverId: contractId, methodNames, allowance };\n                const data = yield delegate.provider(Object.assign(Object.assign({}, delegate), { request: {\n                        type: \"call\",\n                        network: this.networkId,\n                        selector: selector || {},\n                        transactions: [\n                            {\n                                actions: [\n                                    {\n                                        type: \"AddKey\",\n                                        params: {\n                                            publicKey: accessKey.getPublicKey().toString(),\n                                            accessKey: { permission },\n                                        },\n                                    },\n                                ],\n                            },\n                        ],\n                    } }));\n                if (data.account_id == null) {\n                    throw Error(\"Transaction is failed\");\n                }\n                yield this.authStorage.setKey(this.networkId, data.account_id, accessKey);\n                yield this.authStorage.setActiveAccount(this.networkId, data.account_id);\n                return data.account_id;\n            }\n            catch (error) {\n                (0, utils_1.internalThrow)(error, delegate);\n                throw error;\n            }\n        });\n    }\n    silentSignAndSendTransaction({ actions, receiverId, signerId }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const account = yield this.account(signerId);\n            const localKey = yield this.authStorage.getKey(this.networkId, account.accountId).catch(() => null);\n            if (localKey == null)\n                throw new AccessDenied();\n            const publicKey = localKey.getPublicKey();\n            const accessKeys = yield account.getAccessKeys();\n            const call = { receiverId, actions };\n            const isValid = accessKeys.some((v) => {\n                if (v.public_key !== publicKey.toString())\n                    return false;\n                return (0, utils_1.isValidAccessKey)(account.accountId, v, call);\n            });\n            if (isValid === false)\n                throw new AccessDenied();\n            return yield account.signAndSendTransaction({\n                actions: actions.map((a) => (0, actions_1.createAction)(a)),\n                receiverId: receiverId !== null && receiverId !== void 0 ? receiverId : account.accountId,\n            });\n        });\n    }\n    signAndSendTransaction(opts) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        return __awaiter(this, void 0, void 0, function* () {\n            const { signerId, receiverId, actions } = opts, args = __rest(opts, [\"signerId\", \"receiverId\", \"actions\"]);\n            const delegate = args;\n            delegate.strategy = (_a = delegate.strategy) !== null && _a !== void 0 ? _a : this.defaultStrategy();\n            delegate.provider = (_b = delegate.provider) !== null && _b !== void 0 ? _b : this.defaultProvider;\n            (_c = delegate.onInitialized) === null || _c === void 0 ? void 0 : _c.call(delegate);\n            (_e = (_d = delegate.strategy) === null || _d === void 0 ? void 0 : _d.onInitialized) === null || _e === void 0 ? void 0 : _e.call(_d);\n            try {\n                const result = yield this.silentSignAndSendTransaction({ receiverId, actions, signerId });\n                const success = { type: \"local\", status: provider_1.HereProviderStatus.SUCCESS, payload: result === null || result === void 0 ? void 0 : result.transaction_outcome.id };\n                (_f = delegate.onSuccess) === null || _f === void 0 ? void 0 : _f.call(delegate, success);\n                (_h = (_g = delegate.strategy) === null || _g === void 0 ? void 0 : _g.onSuccess) === null || _h === void 0 ? void 0 : _h.call(_g, success);\n                return result;\n            }\n            catch (e) {\n                try {\n                    // If silent sign return AccessDenied or NotEnoughAllowance we request mobile wallet\n                    // OR its just transaction error\n                    if (!(e instanceof AccessDenied) && (e === null || e === void 0 ? void 0 : e.type) !== \"NotEnoughAllowance\") {\n                        (0, utils_1.internalThrow)(e, delegate);\n                        throw e;\n                    }\n                    const activeAccount = yield this.getAccountId().catch(() => undefined);\n                    const data = yield delegate.provider(Object.assign(Object.assign({}, delegate), { request: {\n                            type: \"call\",\n                            network: this.networkId,\n                            transactions: [{ actions: (0, utils_1.serializeActions)(actions), receiverId, signerId }],\n                            selector: opts.selector || { id: signerId || activeAccount },\n                        } }));\n                    if (data.payload == null || data.account_id == null) {\n                        throw Error(\"Transaction not found, but maybe executed\");\n                    }\n                    return yield this.rpc.txStatus(data.payload, data.account_id);\n                }\n                catch (error) {\n                    (0, utils_1.internalThrow)(error, delegate);\n                    throw error;\n                }\n            }\n        });\n    }\n    verifyMessageNEP0413(request, result) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const isSignatureValid = (0, nep0314_1.verifySignature)(request, result);\n            if (!isSignatureValid)\n                throw Error(\"Incorrect signature\");\n            const account = yield this.account(result.accountId);\n            const keys = yield account.getAccessKeys();\n            const isFullAccess = keys.some((k) => {\n                if (k.public_key !== result.publicKey)\n                    return false;\n                if (k.access_key.permission !== \"FullAccess\")\n                    return false;\n                return true;\n            });\n            if (!isFullAccess)\n                throw Error(\"Signer public key is not full access\");\n            return true;\n        });\n    }\n    authenticate(options = {}) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            const signRequest = {\n                nonce: (_a = options.nonce) !== null && _a !== void 0 ? _a : (0, crypto_1.randomBytes)(32),\n                recipient: (_b = options.recipient) !== null && _b !== void 0 ? _b : window.location.host,\n                message: (_c = options.message) !== null && _c !== void 0 ? _c : \"Authenticate\",\n            };\n            const signed = yield this.signMessage(Object.assign(Object.assign({}, signRequest), options));\n            yield this.verifyMessageNEP0413(signRequest, signed);\n            return signed;\n        });\n    }\n    signMessage(options) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            options.strategy = (_a = options.strategy) !== null && _a !== void 0 ? _a : this.defaultStrategy();\n            options.provider = (_b = options.provider) !== null && _b !== void 0 ? _b : this.defaultProvider;\n            (_c = options.onInitialized) === null || _c === void 0 ? void 0 : _c.call(options);\n            (_e = (_d = options.strategy) === null || _d === void 0 ? void 0 : _d.onInitialized) === null || _e === void 0 ? void 0 : _e.call(_d);\n            // Legacy format with receiver property, does not correspond to the current version of the standard\n            if (\"receiver\" in options)\n                return yield this.legacySignMessage(options);\n            const activeAccount = yield this.getAccountId().catch(() => undefined);\n            const data = yield options.provider(Object.assign(Object.assign({}, options), { request: {\n                    type: \"sign\",\n                    message: options.message,\n                    recipient: options.recipient,\n                    nonce: Array.from(options.nonce),\n                    network: this.networkId,\n                    selector: options.selector || { id: activeAccount },\n                } }));\n            if ((data === null || data === void 0 ? void 0 : data.payload) == null)\n                throw Error(\"Signature not found\");\n            const { publicKey, signature, accountId } = JSON.parse(data.payload);\n            return { publicKey, signature, accountId };\n        });\n    }\n    legacySignMessage(_a) {\n        var _b;\n        var { message, receiver, nonce, selector } = _a, delegate = __rest(_a, [\"message\", \"receiver\", \"nonce\", \"selector\"]);\n        return __awaiter(this, void 0, void 0, function* () {\n            if (nonce == null) {\n                let nonceArray = new Uint8Array(32);\n                nonce = [...crypto.getRandomValues(nonceArray)];\n            }\n            const activeAccount = yield this.getAccountId().catch(() => undefined);\n            const data = yield ((_b = delegate.provider) === null || _b === void 0 ? void 0 : _b.call(delegate, Object.assign(Object.assign({}, delegate), { request: {\n                    type: \"sign\",\n                    network: this.networkId,\n                    selector: selector || { id: activeAccount },\n                    message,\n                    receiver,\n                    nonce,\n                } })));\n            if ((data === null || data === void 0 ? void 0 : data.payload) == null) {\n                throw Error(\"Signature not found\");\n            }\n            try {\n                const { publicKey, signature, accountId } = JSON.parse(data.payload);\n                const sign = new Uint8Array(Buffer.from(signature, \"base64\"));\n                const json = JSON.stringify({ message, receiver, nonce });\n                const msg = new Uint8Array(js_sha256_1.sha256.digest(`NEP0413:` + json));\n                const isVerify = key_pair_1.PublicKey.from(publicKey).verify(msg, sign);\n                if (isVerify === false)\n                    throw Error();\n                const account = yield this.account(accountId);\n                const keys = yield account.getAccessKeys();\n                const pb = publicKey.toString();\n                const isValid = keys.some((k) => {\n                    if (k.public_key !== pb)\n                        return false;\n                    if (k.access_key.permission !== \"FullAccess\")\n                        return false;\n                    return true;\n                });\n                if (isValid === false)\n                    throw Error();\n                return {\n                    signature: new Uint8Array(Buffer.from(signature, \"base64\")),\n                    publicKey: key_pair_1.PublicKey.from(publicKey),\n                    message: `NEP0413:` + json,\n                    receiver,\n                    accountId,\n                    nonce,\n                };\n            }\n            catch (_c) {\n                throw Error(\"Signature not correct\");\n            }\n        });\n    }\n    signAndSendTransactions(_a) {\n        var _b, _c, _d, _e, _f, _g, _h, _j;\n        var { transactions, selector } = _a, delegate = __rest(_a, [\"transactions\", \"selector\"]);\n        return __awaiter(this, void 0, void 0, function* () {\n            delegate.strategy = (_b = delegate.strategy) !== null && _b !== void 0 ? _b : this.defaultStrategy();\n            delegate.provider = (_c = delegate.provider) !== null && _c !== void 0 ? _c : this.defaultProvider;\n            (_d = delegate.onInitialized) === null || _d === void 0 ? void 0 : _d.call(delegate);\n            (_f = (_e = delegate.strategy) === null || _e === void 0 ? void 0 : _e.onInitialized) === null || _f === void 0 ? void 0 : _f.call(_e);\n            let results = [];\n            try {\n                for (const call of transactions) {\n                    const r = yield this.silentSignAndSendTransaction(call);\n                    results.push(r);\n                }\n                const payload = results.map((result) => result.transaction_outcome.id).join(\",\");\n                const success = { type: \"local\", status: provider_1.HereProviderStatus.SUCCESS, payload };\n                (_g = delegate.onSuccess) === null || _g === void 0 ? void 0 : _g.call(delegate, success);\n                (_j = (_h = delegate.strategy) === null || _h === void 0 ? void 0 : _h.onSuccess) === null || _j === void 0 ? void 0 : _j.call(_h, success);\n                return results;\n            }\n            catch (e) {\n                try {\n                    // If silent sign return access denied or not enough balance we request mobile wallet\n                    // OR its just transaction error\n                    if (!(e instanceof AccessDenied) && (e === null || e === void 0 ? void 0 : e.type) !== \"NotEnoughAllowance\") {\n                        (0, utils_1.internalThrow)(e, delegate);\n                        throw e;\n                    }\n                    const activeAccount = yield this.getAccountId().catch(() => undefined);\n                    const uncompleted = transactions.slice(results.length);\n                    const data = yield delegate.provider(Object.assign(Object.assign({}, delegate), { request: {\n                            type: \"call\",\n                            network: this.networkId,\n                            selector: selector || { id: uncompleted[0].signerId || activeAccount },\n                            transactions: uncompleted.map((trx) => (Object.assign(Object.assign({}, trx), { actions: (0, utils_1.serializeActions)(trx.actions) }))),\n                        } }));\n                    if (data.payload == null || data.account_id == null) {\n                        throw Error(\"Transaction not found, but maybe executed\");\n                    }\n                    const promises = data.payload.split(\",\").map((id) => this.rpc.txStatus(id, data.account_id));\n                    return yield Promise.all(promises);\n                }\n                catch (error) {\n                    (0, utils_1.internalThrow)(error, delegate);\n                    throw error;\n                }\n            }\n        });\n    }\n}\nexports.HereWallet = HereWallet;\n//# sourceMappingURL=wallet.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGhlcmUtd2FsbGV0L2NvcmUvYnVpbGQvd2FsbGV0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsY0FBYztBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Qsa0JBQWtCO0FBQ2xCLHNCQUFzQixtQkFBTyxDQUFDLGtFQUFhO0FBQzNDLG9CQUFvQixtQkFBTyxDQUFDLDBGQUEyQjtBQUN2RCxtQkFBbUIsbUJBQU8sQ0FBQyw4RkFBZ0M7QUFDM0Qsb0JBQW9CLG1CQUFPLENBQUMsK0RBQVc7QUFDdkMsaUJBQWlCLG1CQUFPLENBQUMsc0JBQVE7QUFDakMsZ0NBQWdDLG1CQUFPLENBQUMsbURBQU87QUFDL0MsdUJBQXVCLG1CQUFPLENBQUMsb0ZBQWdCO0FBQy9DLG1CQUFtQixtQkFBTyxDQUFDLDRFQUFZO0FBQ3ZDLGdCQUFnQixtQkFBTyxDQUFDLHNFQUFTO0FBQ2pDLHdCQUF3QixtQkFBTyxDQUFDLDRGQUFpQjtBQUNqRCxrQkFBa0IsbUJBQU8sQ0FBQyxnRkFBVztBQUNyQyx5QkFBeUIsbUJBQU8sQ0FBQyx3RkFBa0I7QUFDbkQsa0JBQWtCLG1CQUFPLENBQUMsMEVBQVc7QUFDckM7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLG1NQUFtTSxJQUFJO0FBQ3pOO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHVFQUF1RSxVQUFVLFlBQVk7QUFDbko7QUFDQSxtQ0FBbUMsVUFBVTtBQUM3QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDLDZCQUE2QixhQUFhO0FBQzFFLGlCQUFpQixpQkFBaUI7QUFDbEM7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwrQkFBK0I7QUFDdkQ7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsSUFBSTtBQUMvQztBQUNBLFNBQVM7QUFDVDtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLGNBQWMsb0RBQW9EO0FBQ2xFO0FBQ0E7QUFDQSx3QkFBd0IsWUFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDLG1GQUFtRixlQUFlO0FBQ2xHO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsWUFBWTtBQUNyRSx5Q0FBeUM7QUFDekMscUNBQXFDO0FBQ3JDO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxtQ0FBbUMsK0JBQStCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLGdDQUFnQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsK0JBQStCO0FBQ3hHLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RixlQUFlO0FBQ3RHO0FBQ0E7QUFDQSw2Q0FBNkMsdUVBQXVFO0FBQ3BILHlEQUF5RCwrQkFBK0I7QUFDeEYsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0ZBQWdGO0FBQ2hGO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLGNBQWM7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxtQkFBbUI7QUFDdkUsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQSxvQkFBb0Isa0NBQWtDO0FBQ3RELHFCQUFxQjtBQUNyQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsY0FBYyxxQ0FBcUM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOElBQThJLGVBQWU7QUFDN0o7QUFDQTtBQUNBLDRDQUE0QyxtQkFBbUI7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtDQUFrQztBQUMxRDtBQUNBLDhDQUE4QywwQkFBMEI7QUFDeEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxjQUFjLHlCQUF5QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0M7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVGQUF1RixlQUFlO0FBQ3RHO0FBQ0E7QUFDQSxvREFBb0QsOENBQThDO0FBQ2xHLGtHQUFrRyxVQUFVLHFEQUFxRDtBQUNqSywyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vaGVsbG8tbmVhci8uL25vZGVfbW9kdWxlcy9AaGVyZS13YWxsZXQvY29yZS9idWlsZC93YWxsZXQuanM/Y2IyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fcmVzdCA9ICh0aGlzICYmIHRoaXMuX19yZXN0KSB8fCBmdW5jdGlvbiAocywgZSkge1xuICAgIHZhciB0ID0ge307XG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXG4gICAgICAgIHRbcF0gPSBzW3BdO1xuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxuICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xuICAgICAgICB9XG4gICAgcmV0dXJuIHQ7XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5IZXJlV2FsbGV0ID0gdm9pZCAwO1xuY29uc3QgbmVhcl9hcGlfanNfMSA9IHJlcXVpcmUoXCJuZWFyLWFwaS1qc1wiKTtcbmNvbnN0IHByb3ZpZGVyc18xID0gcmVxdWlyZShcIm5lYXItYXBpLWpzL2xpYi9wcm92aWRlcnNcIik7XG5jb25zdCBrZXlfcGFpcl8xID0gcmVxdWlyZShcIm5lYXItYXBpLWpzL2xpYi91dGlscy9rZXlfcGFpclwiKTtcbmNvbnN0IGpzX3NoYTI1Nl8xID0gcmVxdWlyZShcImpzLXNoYTI1NlwiKTtcbmNvbnN0IGNyeXB0b18xID0gcmVxdWlyZShcImNyeXB0b1wiKTtcbmNvbnN0IGJuX2pzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImJuLmpzXCIpKTtcbmNvbnN0IEhlcmVLZXlTdG9yZV8xID0gcmVxdWlyZShcIi4vSGVyZUtleVN0b3JlXCIpO1xuY29uc3QgcHJvdmlkZXJfMSA9IHJlcXVpcmUoXCIuL3Byb3ZpZGVyXCIpO1xuY29uc3QgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuY29uc3QgaGVyZV9wcm92aWRlcl8xID0gcmVxdWlyZShcIi4vaGVyZS1wcm92aWRlclwiKTtcbmNvbnN0IGFjdGlvbnNfMSA9IHJlcXVpcmUoXCIuL2FjdGlvbnNcIik7XG5jb25zdCBXaWRnZXRTdHJhdGVneV8xID0gcmVxdWlyZShcIi4vV2lkZ2V0U3RyYXRlZ3lcIik7XG5jb25zdCBuZXAwMzE0XzEgPSByZXF1aXJlKFwiLi9uZXAwMzE0XCIpO1xuY2xhc3MgQWNjZXNzRGVuaWVkIGV4dGVuZHMgRXJyb3Ige1xufVxuY2xhc3MgSGVyZVdhbGxldCB7XG4gICAgY29uc3RydWN0b3IoeyBub2RlVXJsLCBuZXR3b3JrSWQgPSBcIm1haW5uZXRcIiwgYXV0aFN0b3JhZ2UgPSBuZXcgSGVyZUtleVN0b3JlXzEuSGVyZUtleVN0b3JlKCksIGRlZmF1bHRTdHJhdGVneSA9ICgpID0+IG5ldyBXaWRnZXRTdHJhdGVneV8xLldpZGdldFN0cmF0ZWd5KCksIGRlZmF1bHRQcm92aWRlciA9IGhlcmVfcHJvdmlkZXJfMS5wcm94eVByb3ZpZGVyLCB9ID0ge30pIHtcbiAgICAgICAgdGhpcy5hdXRoU3RvcmFnZSA9IGF1dGhTdG9yYWdlO1xuICAgICAgICB0aGlzLmRlZmF1bHRQcm92aWRlciA9IGRlZmF1bHRQcm92aWRlcjtcbiAgICAgICAgdGhpcy5kZWZhdWx0U3RyYXRlZ3kgPSBkZWZhdWx0U3RyYXRlZ3k7XG4gICAgICAgIGNvbnN0IHNpZ25lciA9IG5ldyBuZWFyX2FwaV9qc18xLkluTWVtb3J5U2lnbmVyKHRoaXMuYXV0aFN0b3JhZ2UpO1xuICAgICAgICBjb25zdCBycGMgPSBuZXcgcHJvdmlkZXJzXzEuSnNvblJwY1Byb3ZpZGVyKHsgdXJsOiBub2RlVXJsICE9PSBudWxsICYmIG5vZGVVcmwgIT09IHZvaWQgMCA/IG5vZGVVcmwgOiBgaHR0cHM6Ly9ycGMuJHtuZXR3b3JrSWR9Lm5lYXIub3JnYCB9KTtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gbmVhcl9hcGlfanNfMS5Db25uZWN0aW9uLmZyb21Db25maWcoe1xuICAgICAgICAgICAganN2bUFjY291bnRJZDogYGpzdm0uJHtuZXR3b3JrSWR9YCxcbiAgICAgICAgICAgIHByb3ZpZGVyOiBycGMsXG4gICAgICAgICAgICBuZXR3b3JrSWQsXG4gICAgICAgICAgICBzaWduZXIsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgcnBjKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnByb3ZpZGVyO1xuICAgIH1cbiAgICBnZXQgc2lnbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLnNpZ25lcjtcbiAgICB9XG4gICAgZ2V0IG5ldHdvcmtJZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5uZXR3b3JrSWQ7XG4gICAgfVxuICAgIGFjY291bnQoaWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnRJZCA9IGlkICE9PSBudWxsICYmIGlkICE9PSB2b2lkIDAgPyBpZCA6ICh5aWVsZCB0aGlzLmF1dGhTdG9yYWdlLmdldEFjdGl2ZUFjY291bnQodGhpcy5uZXR3b3JrSWQpKTtcbiAgICAgICAgICAgIGlmIChhY2NvdW50SWQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQWNjZXNzRGVuaWVkKFwiV2FsbGV0IG5vdCBzaWduZWQgaW5cIik7XG4gICAgICAgICAgICByZXR1cm4gbmV3IG5lYXJfYXBpX2pzXzEuQWNjb3VudCh0aGlzLmNvbm5lY3Rpb24sIGFjY291bnRJZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpc1NpZ25lZEluKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgaWQgPSB5aWVsZCB0aGlzLmF1dGhTdG9yYWdlLmdldEFjdGl2ZUFjY291bnQodGhpcy5uZXR3b3JrSWQpO1xuICAgICAgICAgICAgcmV0dXJuIGlkICE9IG51bGw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzaWduT3V0KCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudElkID0geWllbGQgdGhpcy5hdXRoU3RvcmFnZS5nZXRBY3RpdmVBY2NvdW50KHRoaXMubmV0d29ya0lkKTtcbiAgICAgICAgICAgIGlmIChhY2NvdW50SWQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXYWxsZXQgbm90IHNpZ25lZCBpblwiKTtcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHlpZWxkIHRoaXMuYXV0aFN0b3JhZ2UuZ2V0S2V5KHRoaXMubmV0d29ya0lkLCBhY2NvdW50SWQpO1xuICAgICAgICAgICAgaWYgKGtleSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcHVibGljS2V5ID0ga2V5LmdldFB1YmxpY0tleSgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5zaWxlbnRTaWduQW5kU2VuZFRyYW5zYWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXJJZDogYWNjb3VudElkLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zOiBbeyB0eXBlOiBcIkRlbGV0ZUtleVwiLCBwYXJhbXM6IHsgcHVibGljS2V5IH0gfV0sXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHlpZWxkIHRoaXMuYXV0aFN0b3JhZ2UucmVtb3ZlS2V5KHRoaXMubmV0d29ya0lkLCBhY2NvdW50SWQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0SGVyZUJhbGFuY2UoaWQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjY291bnQgPSB5aWVsZCB0aGlzLmFjY291bnQoaWQpO1xuICAgICAgICAgICAgY29uc3QgY29udHJhY3RJZCA9IHRoaXMubmV0d29ya0lkID09PSBcIm1haW5uZXRcIiA/IFwiaGVyZS5zdG9yYWdlLm5lYXJcIiA6IFwiaGVyZS5zdG9yYWdlLnRlc3RuZXRcIjtcbiAgICAgICAgICAgIGNvbnN0IGhlcmVDb2lucyA9IHlpZWxkIGFjY291bnRcbiAgICAgICAgICAgICAgICAudmlld0Z1bmN0aW9uKHtcbiAgICAgICAgICAgICAgICBhcmdzOiB7IGFjY291bnRfaWQ6IGFjY291bnQuYWNjb3VudElkIH0sXG4gICAgICAgICAgICAgICAgbWV0aG9kTmFtZTogXCJmdF9iYWxhbmNlX29mXCIsXG4gICAgICAgICAgICAgICAgY29udHJhY3RJZCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IFwiMFwiKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgYm5fanNfMS5kZWZhdWx0KGhlcmVDb2lucyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRBdmFpbGFibGVCYWxhbmNlKGlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0geWllbGQgdGhpcy5hY2NvdW50KGlkKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIGFjY291bnQuZ2V0QWNjb3VudEJhbGFuY2UoKTtcbiAgICAgICAgICAgIGNvbnN0IGhlcmVCYWxhbmNlID0geWllbGQgdGhpcy5nZXRIZXJlQmFsYW5jZSgpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBibl9qc18xLmRlZmF1bHQocmVzdWx0LmF2YWlsYWJsZSkuYWRkKG5ldyBibl9qc18xLmRlZmF1bHQoaGVyZUJhbGFuY2UpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEFjY291bnRzKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIHRoaXMuYXV0aFN0b3JhZ2UuZ2V0QWNjb3VudHModGhpcy5uZXR3b3JrSWQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0QWNjb3VudElkKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudElkID0geWllbGQgdGhpcy5hdXRoU3RvcmFnZS5nZXRBY3RpdmVBY2NvdW50KHRoaXMubmV0d29ya0lkKTtcbiAgICAgICAgICAgIGlmIChhY2NvdW50SWQgPT0gbnVsbClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXYWxsZXQgbm90IHNpZ25lZCBpblwiKTtcbiAgICAgICAgICAgIHJldHVybiBhY2NvdW50SWQ7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzd2l0Y2hBY2NvdW50KGlkKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSB5aWVsZCB0aGlzLmF1dGhTdG9yYWdlLmdldEtleSh0aGlzLm5ldHdvcmtJZCwgaWQpO1xuICAgICAgICAgICAgaWYgKGtleSA9PSBudWxsKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQWNjb3VudCAke2lkfSBub3Qgc2lnbmVkIGluYCk7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmF1dGhTdG9yYWdlLnNldEFjdGl2ZUFjY291bnQodGhpcy5uZXR3b3JrSWQsIGlkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpZ25JbihfYSA9IHt9KSB7XG4gICAgICAgIHZhciBfYiwgX2MsIF9kLCBfZSwgX2Y7XG4gICAgICAgIHZhciB7IGNvbnRyYWN0SWQsIGFsbG93YW5jZSwgbWV0aG9kTmFtZXMgPSBbXSwgc2VsZWN0b3IgfSA9IF9hLCBkZWxlZ2F0ZSA9IF9fcmVzdChfYSwgW1wiY29udHJhY3RJZFwiLCBcImFsbG93YW5jZVwiLCBcIm1ldGhvZE5hbWVzXCIsIFwic2VsZWN0b3JcIl0pO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKGNvbnRyYWN0SWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYWNjb3VudElkIH0gPSB5aWVsZCB0aGlzLmF1dGhlbnRpY2F0ZShkZWxlZ2F0ZSk7XG4gICAgICAgICAgICAgICAgLy8gR2VuZXJhdGUgcmFuZG9tIGtleXBhaXJcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmF1dGhTdG9yYWdlLnNldEtleSh0aGlzLm5ldHdvcmtJZCwgYWNjb3VudElkLCBrZXlfcGFpcl8xLktleVBhaXJFZDI1NTE5LmZyb21SYW5kb20oKSk7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5hdXRoU3RvcmFnZS5zZXRBY3RpdmVBY2NvdW50KHRoaXMubmV0d29ya0lkLCBhY2NvdW50SWQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2NvdW50SWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxlZ2F0ZS5zdHJhdGVneSA9IChfYiA9IGRlbGVnYXRlLnN0cmF0ZWd5KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB0aGlzLmRlZmF1bHRTdHJhdGVneSgpO1xuICAgICAgICAgICAgZGVsZWdhdGUucHJvdmlkZXIgPSAoX2MgPSBkZWxlZ2F0ZS5wcm92aWRlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdGhpcy5kZWZhdWx0UHJvdmlkZXI7XG4gICAgICAgICAgICAoX2QgPSBkZWxlZ2F0ZS5vbkluaXRpYWxpemVkKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuY2FsbChkZWxlZ2F0ZSk7XG4gICAgICAgICAgICAoX2YgPSAoX2UgPSBkZWxlZ2F0ZS5zdHJhdGVneSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLm9uSW5pdGlhbGl6ZWQpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5jYWxsKF9lKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjZXNzS2V5ID0gbmVhcl9hcGlfanNfMS5LZXlQYWlyLmZyb21SYW5kb20oXCJlZDI1NTE5XCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlcm1pc3Npb24gPSB7IHJlY2VpdmVySWQ6IGNvbnRyYWN0SWQsIG1ldGhvZE5hbWVzLCBhbGxvd2FuY2UgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0geWllbGQgZGVsZWdhdGUucHJvdmlkZXIoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBkZWxlZ2F0ZSksIHsgcmVxdWVzdDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXR3b3JrOiB0aGlzLm5ldHdvcmtJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvciB8fCB7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiQWRkS2V5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpY0tleTogYWNjZXNzS2V5LmdldFB1YmxpY0tleSgpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY2Vzc0tleTogeyBwZXJtaXNzaW9uIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIH0gfSkpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmFjY291bnRfaWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIlRyYW5zYWN0aW9uIGlzIGZhaWxlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5hdXRoU3RvcmFnZS5zZXRLZXkodGhpcy5uZXR3b3JrSWQsIGRhdGEuYWNjb3VudF9pZCwgYWNjZXNzS2V5KTtcbiAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLmF1dGhTdG9yYWdlLnNldEFjdGl2ZUFjY291bnQodGhpcy5uZXR3b3JrSWQsIGRhdGEuYWNjb3VudF9pZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRhdGEuYWNjb3VudF9pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICgwLCB1dGlsc18xLmludGVybmFsVGhyb3cpKGVycm9yLCBkZWxlZ2F0ZSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzaWxlbnRTaWduQW5kU2VuZFRyYW5zYWN0aW9uKHsgYWN0aW9ucywgcmVjZWl2ZXJJZCwgc2lnbmVySWQgfSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IHlpZWxkIHRoaXMuYWNjb3VudChzaWduZXJJZCk7XG4gICAgICAgICAgICBjb25zdCBsb2NhbEtleSA9IHlpZWxkIHRoaXMuYXV0aFN0b3JhZ2UuZ2V0S2V5KHRoaXMubmV0d29ya0lkLCBhY2NvdW50LmFjY291bnRJZCkuY2F0Y2goKCkgPT4gbnVsbCk7XG4gICAgICAgICAgICBpZiAobG9jYWxLZXkgPT0gbnVsbClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQWNjZXNzRGVuaWVkKCk7XG4gICAgICAgICAgICBjb25zdCBwdWJsaWNLZXkgPSBsb2NhbEtleS5nZXRQdWJsaWNLZXkoKTtcbiAgICAgICAgICAgIGNvbnN0IGFjY2Vzc0tleXMgPSB5aWVsZCBhY2NvdW50LmdldEFjY2Vzc0tleXMoKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbGwgPSB7IHJlY2VpdmVySWQsIGFjdGlvbnMgfTtcbiAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhY2Nlc3NLZXlzLnNvbWUoKHYpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodi5wdWJsaWNfa2V5ICE9PSBwdWJsaWNLZXkudG9TdHJpbmcoKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiAoMCwgdXRpbHNfMS5pc1ZhbGlkQWNjZXNzS2V5KShhY2NvdW50LmFjY291bnRJZCwgdiwgY2FsbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgQWNjZXNzRGVuaWVkKCk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgYWNjb3VudC5zaWduQW5kU2VuZFRyYW5zYWN0aW9uKHtcbiAgICAgICAgICAgICAgICBhY3Rpb25zOiBhY3Rpb25zLm1hcCgoYSkgPT4gKDAsIGFjdGlvbnNfMS5jcmVhdGVBY3Rpb24pKGEpKSxcbiAgICAgICAgICAgICAgICByZWNlaXZlcklkOiByZWNlaXZlcklkICE9PSBudWxsICYmIHJlY2VpdmVySWQgIT09IHZvaWQgMCA/IHJlY2VpdmVySWQgOiBhY2NvdW50LmFjY291bnRJZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbihvcHRzKSB7XG4gICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2g7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB7IHNpZ25lcklkLCByZWNlaXZlcklkLCBhY3Rpb25zIH0gPSBvcHRzLCBhcmdzID0gX19yZXN0KG9wdHMsIFtcInNpZ25lcklkXCIsIFwicmVjZWl2ZXJJZFwiLCBcImFjdGlvbnNcIl0pO1xuICAgICAgICAgICAgY29uc3QgZGVsZWdhdGUgPSBhcmdzO1xuICAgICAgICAgICAgZGVsZWdhdGUuc3RyYXRlZ3kgPSAoX2EgPSBkZWxlZ2F0ZS5zdHJhdGVneSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdGhpcy5kZWZhdWx0U3RyYXRlZ3koKTtcbiAgICAgICAgICAgIGRlbGVnYXRlLnByb3ZpZGVyID0gKF9iID0gZGVsZWdhdGUucHJvdmlkZXIpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHRoaXMuZGVmYXVsdFByb3ZpZGVyO1xuICAgICAgICAgICAgKF9jID0gZGVsZWdhdGUub25Jbml0aWFsaXplZCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmNhbGwoZGVsZWdhdGUpO1xuICAgICAgICAgICAgKF9lID0gKF9kID0gZGVsZWdhdGUuc3RyYXRlZ3kpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5vbkluaXRpYWxpemVkKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2UuY2FsbChfZCk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHlpZWxkIHRoaXMuc2lsZW50U2lnbkFuZFNlbmRUcmFuc2FjdGlvbih7IHJlY2VpdmVySWQsIGFjdGlvbnMsIHNpZ25lcklkIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSB7IHR5cGU6IFwibG9jYWxcIiwgc3RhdHVzOiBwcm92aWRlcl8xLkhlcmVQcm92aWRlclN0YXR1cy5TVUNDRVNTLCBwYXlsb2FkOiByZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHQudHJhbnNhY3Rpb25fb3V0Y29tZS5pZCB9O1xuICAgICAgICAgICAgICAgIChfZiA9IGRlbGVnYXRlLm9uU3VjY2VzcykgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLmNhbGwoZGVsZWdhdGUsIHN1Y2Nlc3MpO1xuICAgICAgICAgICAgICAgIChfaCA9IChfZyA9IGRlbGVnYXRlLnN0cmF0ZWd5KSA9PT0gbnVsbCB8fCBfZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2cub25TdWNjZXNzKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guY2FsbChfZywgc3VjY2Vzcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgc2lsZW50IHNpZ24gcmV0dXJuIEFjY2Vzc0RlbmllZCBvciBOb3RFbm91Z2hBbGxvd2FuY2Ugd2UgcmVxdWVzdCBtb2JpbGUgd2FsbGV0XG4gICAgICAgICAgICAgICAgICAgIC8vIE9SIGl0cyBqdXN0IHRyYW5zYWN0aW9uIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBBY2Nlc3NEZW5pZWQpICYmIChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUudHlwZSkgIT09IFwiTm90RW5vdWdoQWxsb3dhbmNlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCB1dGlsc18xLmludGVybmFsVGhyb3cpKGUsIGRlbGVnYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlQWNjb3VudCA9IHlpZWxkIHRoaXMuZ2V0QWNjb3VudElkKCkuY2F0Y2goKCkgPT4gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHlpZWxkIGRlbGVnYXRlLnByb3ZpZGVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgZGVsZWdhdGUpLCB7IHJlcXVlc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImNhbGxcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXR3b3JrOiB0aGlzLm5ldHdvcmtJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbnM6IFt7IGFjdGlvbnM6ICgwLCB1dGlsc18xLnNlcmlhbGl6ZUFjdGlvbnMpKGFjdGlvbnMpLCByZWNlaXZlcklkLCBzaWduZXJJZCB9XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3Rvcjogb3B0cy5zZWxlY3RvciB8fCB7IGlkOiBzaWduZXJJZCB8fCBhY3RpdmVBY2NvdW50IH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB9IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEucGF5bG9hZCA9PSBudWxsIHx8IGRhdGEuYWNjb3VudF9pZCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIlRyYW5zYWN0aW9uIG5vdCBmb3VuZCwgYnV0IG1heWJlIGV4ZWN1dGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCB0aGlzLnJwYy50eFN0YXR1cyhkYXRhLnBheWxvYWQsIGRhdGEuYWNjb3VudF9pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAoMCwgdXRpbHNfMS5pbnRlcm5hbFRocm93KShlcnJvciwgZGVsZWdhdGUpO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB2ZXJpZnlNZXNzYWdlTkVQMDQxMyhyZXF1ZXN0LCByZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzU2lnbmF0dXJlVmFsaWQgPSAoMCwgbmVwMDMxNF8xLnZlcmlmeVNpZ25hdHVyZSkocmVxdWVzdCwgcmVzdWx0KTtcbiAgICAgICAgICAgIGlmICghaXNTaWduYXR1cmVWYWxpZClcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIkluY29ycmVjdCBzaWduYXR1cmVcIik7XG4gICAgICAgICAgICBjb25zdCBhY2NvdW50ID0geWllbGQgdGhpcy5hY2NvdW50KHJlc3VsdC5hY2NvdW50SWQpO1xuICAgICAgICAgICAgY29uc3Qga2V5cyA9IHlpZWxkIGFjY291bnQuZ2V0QWNjZXNzS2V5cygpO1xuICAgICAgICAgICAgY29uc3QgaXNGdWxsQWNjZXNzID0ga2V5cy5zb21lKChrKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGsucHVibGljX2tleSAhPT0gcmVzdWx0LnB1YmxpY0tleSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChrLmFjY2Vzc19rZXkucGVybWlzc2lvbiAhPT0gXCJGdWxsQWNjZXNzXCIpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFpc0Z1bGxBY2Nlc3MpXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJTaWduZXIgcHVibGljIGtleSBpcyBub3QgZnVsbCBhY2Nlc3NcIik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGF1dGhlbnRpY2F0ZShvcHRpb25zID0ge30pIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBzaWduUmVxdWVzdCA9IHtcbiAgICAgICAgICAgICAgICBub25jZTogKF9hID0gb3B0aW9ucy5ub25jZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogKDAsIGNyeXB0b18xLnJhbmRvbUJ5dGVzKSgzMiksXG4gICAgICAgICAgICAgICAgcmVjaXBpZW50OiAoX2IgPSBvcHRpb25zLnJlY2lwaWVudCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogd2luZG93LmxvY2F0aW9uLmhvc3QsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogKF9jID0gb3B0aW9ucy5tZXNzYWdlKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBcIkF1dGhlbnRpY2F0ZVwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHNpZ25lZCA9IHlpZWxkIHRoaXMuc2lnbk1lc3NhZ2UoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzaWduUmVxdWVzdCksIG9wdGlvbnMpKTtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMudmVyaWZ5TWVzc2FnZU5FUDA0MTMoc2lnblJlcXVlc3QsIHNpZ25lZCk7XG4gICAgICAgICAgICByZXR1cm4gc2lnbmVkO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2lnbk1lc3NhZ2Uob3B0aW9ucykge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgb3B0aW9ucy5zdHJhdGVneSA9IChfYSA9IG9wdGlvbnMuc3RyYXRlZ3kpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRoaXMuZGVmYXVsdFN0cmF0ZWd5KCk7XG4gICAgICAgICAgICBvcHRpb25zLnByb3ZpZGVyID0gKF9iID0gb3B0aW9ucy5wcm92aWRlcikgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdGhpcy5kZWZhdWx0UHJvdmlkZXI7XG4gICAgICAgICAgICAoX2MgPSBvcHRpb25zLm9uSW5pdGlhbGl6ZWQpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5jYWxsKG9wdGlvbnMpO1xuICAgICAgICAgICAgKF9lID0gKF9kID0gb3B0aW9ucy5zdHJhdGVneSkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLm9uSW5pdGlhbGl6ZWQpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5jYWxsKF9kKTtcbiAgICAgICAgICAgIC8vIExlZ2FjeSBmb3JtYXQgd2l0aCByZWNlaXZlciBwcm9wZXJ0eSwgZG9lcyBub3QgY29ycmVzcG9uZCB0byB0aGUgY3VycmVudCB2ZXJzaW9uIG9mIHRoZSBzdGFuZGFyZFxuICAgICAgICAgICAgaWYgKFwicmVjZWl2ZXJcIiBpbiBvcHRpb25zKVxuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCB0aGlzLmxlZ2FjeVNpZ25NZXNzYWdlKG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgYWN0aXZlQWNjb3VudCA9IHlpZWxkIHRoaXMuZ2V0QWNjb3VudElkKCkuY2F0Y2goKCkgPT4gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCBvcHRpb25zLnByb3ZpZGVyKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgcmVxdWVzdDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNpZ25cIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogb3B0aW9ucy5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICByZWNpcGllbnQ6IG9wdGlvbnMucmVjaXBpZW50LFxuICAgICAgICAgICAgICAgICAgICBub25jZTogQXJyYXkuZnJvbShvcHRpb25zLm5vbmNlKSxcbiAgICAgICAgICAgICAgICAgICAgbmV0d29yazogdGhpcy5uZXR3b3JrSWQsXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBvcHRpb25zLnNlbGVjdG9yIHx8IHsgaWQ6IGFjdGl2ZUFjY291bnQgfSxcbiAgICAgICAgICAgICAgICB9IH0pKTtcbiAgICAgICAgICAgIGlmICgoZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLnBheWxvYWQpID09IG51bGwpXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJTaWduYXR1cmUgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgY29uc3QgeyBwdWJsaWNLZXksIHNpZ25hdHVyZSwgYWNjb3VudElkIH0gPSBKU09OLnBhcnNlKGRhdGEucGF5bG9hZCk7XG4gICAgICAgICAgICByZXR1cm4geyBwdWJsaWNLZXksIHNpZ25hdHVyZSwgYWNjb3VudElkIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsZWdhY3lTaWduTWVzc2FnZShfYSkge1xuICAgICAgICB2YXIgX2I7XG4gICAgICAgIHZhciB7IG1lc3NhZ2UsIHJlY2VpdmVyLCBub25jZSwgc2VsZWN0b3IgfSA9IF9hLCBkZWxlZ2F0ZSA9IF9fcmVzdChfYSwgW1wibWVzc2FnZVwiLCBcInJlY2VpdmVyXCIsIFwibm9uY2VcIiwgXCJzZWxlY3RvclwiXSk7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAobm9uY2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCBub25jZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoMzIpO1xuICAgICAgICAgICAgICAgIG5vbmNlID0gWy4uLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMobm9uY2VBcnJheSldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWN0aXZlQWNjb3VudCA9IHlpZWxkIHRoaXMuZ2V0QWNjb3VudElkKCkuY2F0Y2goKCkgPT4gdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCAoKF9iID0gZGVsZWdhdGUucHJvdmlkZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYWxsKGRlbGVnYXRlLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRlbGVnYXRlKSwgeyByZXF1ZXN0OiB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwic2lnblwiLFxuICAgICAgICAgICAgICAgICAgICBuZXR3b3JrOiB0aGlzLm5ldHdvcmtJZCxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yIHx8IHsgaWQ6IGFjdGl2ZUFjY291bnQgfSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICAgICAgcmVjZWl2ZXIsXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAgICAgIH0gfSkpKTtcbiAgICAgICAgICAgIGlmICgoZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhLnBheWxvYWQpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIlNpZ25hdHVyZSBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgcHVibGljS2V5LCBzaWduYXR1cmUsIGFjY291bnRJZCB9ID0gSlNPTi5wYXJzZShkYXRhLnBheWxvYWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ24gPSBuZXcgVWludDhBcnJheShCdWZmZXIuZnJvbShzaWduYXR1cmUsIFwiYmFzZTY0XCIpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlLCByZWNlaXZlciwgbm9uY2UgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbXNnID0gbmV3IFVpbnQ4QXJyYXkoanNfc2hhMjU2XzEuc2hhMjU2LmRpZ2VzdChgTkVQMDQxMzpgICsganNvbikpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzVmVyaWZ5ID0ga2V5X3BhaXJfMS5QdWJsaWNLZXkuZnJvbShwdWJsaWNLZXkpLnZlcmlmeShtc2csIHNpZ24pO1xuICAgICAgICAgICAgICAgIGlmIChpc1ZlcmlmeSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudCA9IHlpZWxkIHRoaXMuYWNjb3VudChhY2NvdW50SWQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtleXMgPSB5aWVsZCBhY2NvdW50LmdldEFjY2Vzc0tleXMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYiA9IHB1YmxpY0tleS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSBrZXlzLnNvbWUoKGspID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGsucHVibGljX2tleSAhPT0gcGIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrLmFjY2Vzc19rZXkucGVybWlzc2lvbiAhPT0gXCJGdWxsQWNjZXNzXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzaWduYXR1cmU6IG5ldyBVaW50OEFycmF5KEJ1ZmZlci5mcm9tKHNpZ25hdHVyZSwgXCJiYXNlNjRcIikpLFxuICAgICAgICAgICAgICAgICAgICBwdWJsaWNLZXk6IGtleV9wYWlyXzEuUHVibGljS2V5LmZyb20ocHVibGljS2V5KSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYE5FUDA0MTM6YCArIGpzb24sXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyLFxuICAgICAgICAgICAgICAgICAgICBhY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgICAgIG5vbmNlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoX2MpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihcIlNpZ25hdHVyZSBub3QgY29ycmVjdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zKF9hKSB7XG4gICAgICAgIHZhciBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2o7XG4gICAgICAgIHZhciB7IHRyYW5zYWN0aW9ucywgc2VsZWN0b3IgfSA9IF9hLCBkZWxlZ2F0ZSA9IF9fcmVzdChfYSwgW1widHJhbnNhY3Rpb25zXCIsIFwic2VsZWN0b3JcIl0pO1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgZGVsZWdhdGUuc3RyYXRlZ3kgPSAoX2IgPSBkZWxlZ2F0ZS5zdHJhdGVneSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogdGhpcy5kZWZhdWx0U3RyYXRlZ3koKTtcbiAgICAgICAgICAgIGRlbGVnYXRlLnByb3ZpZGVyID0gKF9jID0gZGVsZWdhdGUucHJvdmlkZXIpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHRoaXMuZGVmYXVsdFByb3ZpZGVyO1xuICAgICAgICAgICAgKF9kID0gZGVsZWdhdGUub25Jbml0aWFsaXplZCkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLmNhbGwoZGVsZWdhdGUpO1xuICAgICAgICAgICAgKF9mID0gKF9lID0gZGVsZWdhdGUuc3RyYXRlZ3kpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS5vbkluaXRpYWxpemVkKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2YuY2FsbChfZSk7XG4gICAgICAgICAgICBsZXQgcmVzdWx0cyA9IFtdO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNhbGwgb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSB5aWVsZCB0aGlzLnNpbGVudFNpZ25BbmRTZW5kVHJhbnNhY3Rpb24oY2FsbCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHJlc3VsdHMubWFwKChyZXN1bHQpID0+IHJlc3VsdC50cmFuc2FjdGlvbl9vdXRjb21lLmlkKS5qb2luKFwiLFwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWNjZXNzID0geyB0eXBlOiBcImxvY2FsXCIsIHN0YXR1czogcHJvdmlkZXJfMS5IZXJlUHJvdmlkZXJTdGF0dXMuU1VDQ0VTUywgcGF5bG9hZCB9O1xuICAgICAgICAgICAgICAgIChfZyA9IGRlbGVnYXRlLm9uU3VjY2VzcykgPT09IG51bGwgfHwgX2cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9nLmNhbGwoZGVsZWdhdGUsIHN1Y2Nlc3MpO1xuICAgICAgICAgICAgICAgIChfaiA9IChfaCA9IGRlbGVnYXRlLnN0cmF0ZWd5KSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2gub25TdWNjZXNzKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ouY2FsbChfaCwgc3VjY2Vzcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHNpbGVudCBzaWduIHJldHVybiBhY2Nlc3MgZGVuaWVkIG9yIG5vdCBlbm91Z2ggYmFsYW5jZSB3ZSByZXF1ZXN0IG1vYmlsZSB3YWxsZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gT1IgaXRzIGp1c3QgdHJhbnNhY3Rpb24gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIEFjY2Vzc0RlbmllZCkgJiYgKGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS50eXBlKSAhPT0gXCJOb3RFbm91Z2hBbGxvd2FuY2VcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIHV0aWxzXzEuaW50ZXJuYWxUaHJvdykoZSwgZGVsZWdhdGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVBY2NvdW50ID0geWllbGQgdGhpcy5nZXRBY2NvdW50SWQoKS5jYXRjaCgoKSA9PiB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1bmNvbXBsZXRlZCA9IHRyYW5zYWN0aW9ucy5zbGljZShyZXN1bHRzLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB5aWVsZCBkZWxlZ2F0ZS5wcm92aWRlcihPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGRlbGVnYXRlKSwgeyByZXF1ZXN0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJjYWxsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0d29yazogdGhpcy5uZXR3b3JrSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yIHx8IHsgaWQ6IHVuY29tcGxldGVkWzBdLnNpZ25lcklkIHx8IGFjdGl2ZUFjY291bnQgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbnM6IHVuY29tcGxldGVkLm1hcCgodHJ4KSA9PiAoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0cngpLCB7IGFjdGlvbnM6ICgwLCB1dGlsc18xLnNlcmlhbGl6ZUFjdGlvbnMpKHRyeC5hY3Rpb25zKSB9KSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSB9KSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnBheWxvYWQgPT0gbnVsbCB8fCBkYXRhLmFjY291bnRfaWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJUcmFuc2FjdGlvbiBub3QgZm91bmQsIGJ1dCBtYXliZSBleGVjdXRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9taXNlcyA9IGRhdGEucGF5bG9hZC5zcGxpdChcIixcIikubWFwKChpZCkgPT4gdGhpcy5ycGMudHhTdGF0dXMoaWQsIGRhdGEuYWNjb3VudF9pZCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgUHJvbWlzZS5hbGwocHJvbWlzZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgKDAsIHV0aWxzXzEuaW50ZXJuYWxUaHJvdykoZXJyb3IsIGRlbGVnYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkhlcmVXYWxsZXQgPSBIZXJlV2FsbGV0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9d2FsbGV0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@here-wallet/core/build/wallet.js\n");

/***/ })

};
;